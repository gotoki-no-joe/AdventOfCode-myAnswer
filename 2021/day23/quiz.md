# 23日目：ヨコエビ  #

ヨコエビの一群があなたの豪華な潜水艦に気づき、あなたに止まるよう合図をします。
「何と印象的な殻なのでしょう。」ヨコエビの一人が言いました。
「あなたなら、私たちの最高の科学者を困惑させた問題を解けるに違いありません。」

彼らは続けて、臆病で頑固なヨコエビの群れが近くの巣穴に住んでいると説明します。
琥珀色 (**Amber**, A)、青銅色 (**Bronze**, B)、銅色 (**Copper**, C)、砂漠色 (**Desert**, D)の4種類のヨコエビが
そこに住んでいます。

彼らは**廊下**と4つの**部屋**からなる巣穴に住んでいます。
(JOE side room)
部屋は最初はヨコエビでいっぱいで、廊下は最初は空です。

彼らは**状況の図**をあなたに示します（パズル入力）。
そこには
それぞれのヨコエビの位置
（`A`,`B`,`C`,`D`で表し、これはヨコエビがいないならば空き空間）
壁 (`#`)、空き空間 (`.`) が示されています。

例えば：

```
#############
#...........#
###B#C#B#D###
  #A#D#C#A#
  #########
```

全てのヨコエビが部屋に納まり、それぞれの部屋には1種類のヨコエビだけがおり、
またその種類が左から右へAからDと整列しているように
整理する方法をヨコエビは望んでいます。
このように：

```
#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #########
```

ヨコエビは、上下左右に隣接する空き空間へ向けて移動できます。
ヨコエビは、種類によって1ステップ移動するために必要な**エネルギー**の量が異なります。
琥珀色(A)のヨコエビは1ステップごとにエネルギーを1必要とし、
青銅色(B)のヨコエビは10エネルギーを必要とし、
銅色(C)のヨコエビは100必要とし、
砂漠色(D)のヨコエビは1000を必要とします。
ヨコエビたちは、**総エネルギーを最小限に抑える**ような、ヨコエビを整理する方法を見つけてほしいと考えています。

ただし、ヨコエビは臆病で頑固なので、いくつかの追加の規則があります。

- ヨコエビは、**部屋のすぐ外の場所に留まることはありません**。
彼らは引き続き移動するときに限り、その場所に移動することができます。
（具体的には、これはヨコエビの開始位置の真上にある廊下の4つの空き空間を指します。）
（超訳：その場所に入ったときは、続けて動いてその場を立ち去る必要があります。）
- ヨコエビは、
その部屋が目的の部屋であり**かつ**、その部屋にその部屋を目的地としないヨコエビが居ない限り、
**廊下から部屋に移動する**ことはありません。
（超訳：(1) 目的の部屋にのみ入れます。自分の目的でない部屋には入ってはいけません。
(2) 部屋に、自分と異なる種類のヨコエビがまだ居るときは、部屋に入れません。
無人か、自分と同じ種類のヨコエビ(だけ)が居る場合にのみ入れます。）

端脚類の開始室が目的の部屋でない場合は、端脚類が部屋を出るまでその部屋にとどまることができます。（たとえば、琥珀色の端脚類は廊下から右の3つの部屋に移動せず、その部屋が空の場合、または他の琥珀色の端脚類のみが含まれている場合にのみ、左端の部屋に移動します。）
端脚類が廊下で移動を停止すると、部屋に移動できるようになるまでその場所に留まります。（つまり、端脚類が動き始めると、現在廊下にある他の端脚類は所定の位置にロックされ、部屋に完全に移動できるようになるまで再び移動しません。）
上記の例では、端脚類は最小限の12521エネルギーを使用して編成できます。これを行う1つの方法を以下に示します。

構成の開始：

#############
#...........#
###B#C#B#D###
  #A#D#C#A#
  #########
1つのブロンズ端脚類が廊下に移動し、4つのステップを踏み、40エネルギーを使用します。

#############
#...B.......#
###B#C#.#D###
  #A#D#C#A#
  #########
横の部屋にない唯一の銅端脚類がそこに移動し、4つのステップを踏んで400エネルギーを使用します。

#############
#...B.......#
###B#.#C#D###
  #A#D#C#A#
  #########
砂漠の端脚類が邪魔にならないように移動し、3つのステップを踏んで3000エネルギーを使用します。次に、ブロンズの端脚類が3つのステップを踏んで30エネルギーを使用します。

#############
#.....D.....#
###B#.#C#D###
  #A#B#C#A#
  #########
左端のブロンズ端脚類は、40エネルギーを使用してその部屋に移動します。

#############
#.....D.....#
###.#B#C#D###
  #A#B#C#A#
  #########
右端の部屋にある両方の端脚類は、2003合計でエネルギーを使用して廊下に移動します。

#############
#.....D.D.A.#
###.#B#C#.###
  #A#B#C#.#
  #########
両方の砂漠の端脚類は、7000エネルギーを使用して右端の部屋に移動します。

#############
#.........A.#
###.#B#C#D###
  #A#B#C#D#
  #########
最後に、最後の琥珀色の端脚類が8エネルギーを使用して部屋に移動します。

#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #########
端脚類を整理するために必要な最小のエネルギーは何ですか？

まず、パズルの入力を取得します。

答え： 
 

[共有することもできます]このパズル。