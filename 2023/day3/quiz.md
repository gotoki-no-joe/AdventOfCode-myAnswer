# 3日目: ギア比

あなたと妖精は最終的にゴンドラのリフト乗り場に到着します。
彼はゴンドラリフトで**水源**まで行けると言いましたが、
彼が付いてくるのはここまでです。中に入ります。

ゴンドラはすぐに見つかりましたが、問題があるようです。
ゴンドラが動いていないということです。

「うわ！」

振り向くと、レンチを持って機械油の匂いを漂わせる妖精が驚いた表情をしているのが見えました。
「申し訳ありません、誰も来るとは思っていませんでした。
現在ゴンドラリフトが故障中です。
修理できるまでにはまだ時間がかかります。」
あなたは手伝うことを申し出ます。

エンジニアは、エンジンの部品がなくなっているようだが、それがどれなのかが誰にも分からないと説明しました。
エンジンの設計図にある**全ての部品番号を合計**できれば、どの部品がないのかを簡単に特定できるはずです。

エンジンの設計図（パズルの入力）は、エンジンの視覚的表現で構成されます。
よくわからない数字や記号がたくさんありますが、
**記号に隣接する数**（ここでは斜めも隣に含みます）は「部品番号」であり、
合計に含める必要があるようです。（ピリオド（`.`）は記号に入りません。）

エンジンの設計図の例を示します：

```
467..114..
...*......
..35..633.
......#...
617*......
.....+.58.
..592.....
......755.
...$.*....
.664.598..
```

この設計図では、114（右上）と58（右中）の2つの数は記号に隣接していないため、部品番号ではありません。
それ以外の数は記号に隣接しているため、部品番号**です**。それらの合計は4361です。

もちろん、実際のエンジンの設計図はもっと大きなものです。
**エンジンの設計図にある全ての部品番号の合計はいくつですか？**

# パート2

エンジニアは不足している部品を見つけてエンジンに取り付けます。
エンジンが始動したので、あなたは一番近いゴンドラに飛び乗り、いよいよ水源まで登る準備が整います。

ところが、それほど速く進んでいるようには見えません。
もしかしたらまだ何か問題があるのでしょうか？
幸いなことに、ゴンドラには「ヘルプ」と書かれた電話が設置されていて、
あなたが電話を取るとエンジニアが応答します。
(? engineer 機関士？)

あなたが状況を説明しようと口を開くよりも先に、彼女は窓の外を見るように勧めます。
そこに立っているエンジニアは、片手に電話を持ち、もう片方の手で手を振っています。
あまりにもゆっくり進んでいるので、まだ駅から出発できていません。
ゴンドラを降ります。

問題は部品の欠落だけではありませんでした。
エンジンのギアのひとつが間違っていました。
**ギア**は、**ちょうどふたつの部品番号**に隣接する全ての `*` 記号です。
その**ギア比**は、これらふたつの数値を掛け合わせた結果です。

今回は、エンジニアがどのギアを交換する必要があるかを判断できるように、
すべてのギアのギア比を見つけて合計する必要があります。

同じエンジンの設計図をもう一度考えてみましょう：

```
467..114..
...*......
..35..633.
......#...
617*......
.....+.58.
..592.....
......755.
...$.*....
.664.598..
```

この設計図には**ふたつ**の歯車があります。
ひとつめは左上です。部品番号は467と35なので、ギア比は16345です。
ふたつめのギアは右下にあります。そのギア比は451490です。
（617に隣接する`*`はひとつの部品番号にのみ隣接しているため、ギアでは**ありません。**）
全てのギア比を合計すると、467835となります。

**エンジンの設計図にある全てのギア比の合計はいくつですか？**
