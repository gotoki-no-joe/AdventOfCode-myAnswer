コードの到来[について]【イベント】[店][設定][ログアウト]ゴトキノジョー40*
       λy。2023年[カレンダー][AoC++]【スポンサー】[リーダーボード]【統計】
私たちのスポンサーは、 Advent of Code の実現を支援します。
Spotify - 当社のエンジニアリング ブログをフォローして、当社の開発者が毎日どのように複雑な技術的問題を大規模に解決しているかをご覧ください。
--- 22日目: サンドスラブ ---
十分な量の砂が落ちました。ついに雪島の水を濾過できるようになりました。

よくほとんど。

砂は大きく圧縮された砂のレンガとして降り注ぎ、積み重なってここ島の端近くに印象的な山を形成しています。水をろ過するために砂を利用するには、レンガの一部をばらばらに、いや、崩壊させて、自由に流れる砂に戻す必要があります。

スタックは十分な高さがあるため、どのレンガを分解するかを慎重に選択する必要があります。間違ったレンガを分解すると、積み上げられたレンガの大部分が倒れる可能性があり、かなり危険です。

水の濾過作業を担当するエルフは、レンガがまだ落ちている間にそのスナップショットを撮りました(パズルの入力)。これにより、どのレンガが安全に崩壊するかを判断できるようになります。例えば：

1,0,1~1,2,1
0,0,2~2,0,2
0,2,3~2,2,3
0,0,4~0,2,4
2,0,5~2,2,5
0,1,6~2,1,6
1,1,8~1,1,9
スナップショット内のテキストの各行は、スナップショットが取得された時点の 1 つのレンガの位置を表します。位置は、x,y,zチルダ ( ) で区切られた 2 つの座標 (レンガの両端に 1 つずつ)として指定されます~。各レンガは立方体の 1 つの直線で構成されており、エルフは、すべての自由落下レンガが地面から整数の位置にあるスナップショットの時間を選択することにも注意しました。そのため、スナップショット全体は、 3次元の立方体グリッド。

のような線は、2,2,2~2,2,2レンガの両端が同じ座標にあること、つまり、レンガが単一の立方体であることを意味します。

のような線0,0,10~1,0,10、またはその両方は、体積が 2 つの立方体で、両方とも水平方向の0,0,10~0,1,10レンガを表します。最初のレンガは の方向に伸び、2 番目のレンガは の方向に伸びます。xy

のような線は、垂直方向に向いた10 個の立方体のレンガ0,0,1~0,0,10を表します。レンガの一端は に位置する立方体であり、レンガの他端はその直上の に位置します。0,0,10,0,10

地面はz=0完全に平坦です。zしたがって、レンガの最低価値は です1。つまり、5,5,1~5,6,1と は0,2,1~0,2,5両方とも地面で休んでいますが、3,3,2~3,3,3スナップショットの時点では地上にいました。

スナップショットはレンガがまだ落下している間に撮影されたため、一部のレンガはまだ空中にあります。それらが最終的にどこに行くのかを把握することから始める必要があります。レンガは魔法のように安定しているため、長い水平レンガの一方の端だけが支えられているような奇妙な状況でも、回転することはありません。2 つのレンガは同じ位置を占めることができないため、落下するレンガは最初に遭遇した他のレンガの上に止まります。

同じ例をもう一度示します。今回は各レンガに文字が与えられているため、図でマークできるようになります。

1,0,1~1,2,1   <- A
0,0,2~2,0,2   <- B
0,2,3~2,2,3   <- C
0,0,4~0,2,4   <- D
2,0,5~2,2,5   <- E
0,1,6~2,1,6   <- F
1,1,8~1,1,9   <- G
スナップショットの時点では、x軸が左から右に向かうように横から見ると、これらのレンガは次のように配置されます。

 x
012
.G. 9
.G. 8
... 7
FFF 6
..E 5 z
D.. 4
CCC 3
BBB 2
.A. 1
--- 0
軸が左から右になるように視点を 90 度回転するとy、同じレンガが次のように配置されます。

 y
012
.G. 9
.G. 8
... 7
.F. 6
EEE 5 z
DDD 4
..C 3
B.. 2
AAA 1
--- 0
すべてのレンガが可能な限り下に落ちると、スタックは次のようになります。これは、?その位置でレンガが他のレンガの後ろに隠れることを意味します。

 x
012
.G. 6
.G. 5
FFF 4
D.E 3 z
??? 2
.A. 1
--- 0
もう一度横から：

 y
012
.G. 6
.G. 5
.F. 4
??? 3 z
B.C 2
AAA 1
--- 0
すべてのレンガが落ち着いたので、どのレンガが他のどのレンガを支えているかが簡単にわかります。

レンガはレンガとAを支える唯一のレンガです。BC
ブリックは、ブリックとブリックBをサポートする 2 つのブリックのうちの 1 つです。DE
レンガは、レンガとレンガCをサポートするもう 1 つのレンガです。DE
レンガはDレンガをサポートしますF。
ブリックはEブリックもサポートしますF。
レンガはFレンガをサポートしますG。
ブリックはGレンガをサポートしていません。
最初のタスクは、どのレンガが分解しても安全かを判断することです。レンガを取り除いた後、他のレンガがさらに真下に落ちない場合、レンガは安全に解体できます。実際にレンガを分解するのではなく、各レンガについて、そのレンガだけが分解された場合に何が起こるかを判断するだけです。レンガは、他のレンガで完全に囲まれている場合でも崩壊する可能性があります。必要に応じて、レンガの間を押し込むこともできます。

この例では、レンガは次のように分解できます。

レンガはA安全に分解できません。それが崩壊した場合、レンガBとC両方が落ちるでしょう。
レンガは崩壊するB 可能性があります。その上のレンガ (DとE) は依然として render によってサポートされますC。
レンガは崩壊するC 可能性があります。その上のレンガ (DとE) は依然として render によってサポートされますB。
レンガは崩壊するD 可能性があります。その上のレンガ ( F) は依然として煉瓦によってサポートされますE。
レンガは崩壊するE 可能性があります。その上のレンガ ( F) は依然として煉瓦によってサポートされますD。
レンガはF分解できません。その上のレンガ ( G) が落ちるでしょう。
レンガは崩壊するG 可能性があります。他のレンガはサポートしません。
したがって、この例では、5レンガを安全に分解できます。

スナップショットに基づいてブロックがどのように安定するかを図示します。それらが落ち着いたら、単一のレンガを分解することを検討してください。安全に崩壊するレンガとして選択できるレンガは何個あるでしょうか?

まず、パズルの入力を取得します。

答え：
 

［シェア］もできます】このパズル。