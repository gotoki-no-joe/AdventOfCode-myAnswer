# 入力

行ごとに分割した文字列のリストとする。

# パート1

マス1つにつき、

- 上下左右の隣接マスから、そのマスに光が入る

という4つの頂点があるグラフを考える。
隣接するマスへ光が送られるとき、そのマスへの有向辺を接続することができる。

- `.` マスは、直進して反対側のマスへそのまま入射させる
- `/`, `\` 反射マスは、反射した先の隣接マスへ入射させる
- `|`, `-` スプリッターマスは、平行向きは空白マスのように、垂直向きは両方の隣接マスへ入射させる

というグラフの、光が入ってくる頂点から到達可能な頂点を全て発見し、
マスについていずれかの向きから入射があるなら数えることで答えを導ける。

マスの座標 `(i,j)` について、さらに上下左右からを表す0～3の添え字の3タプルで頂点を表す。
入射を送る先は次のようになる。ただし、枠を越えるときは接続先がない。

| 入射 | `.` | `/`  | `\`  | `|`  | `-`  |
|:----:|:---:|:----:|:----:|:----:|:----:|
| 0(上)|(i+1,j,0)|(i,j-1,3)|(i,j+1,2)|(i+1,j,0)|both|
| 1(下)|(i-1,j,1)|(i,j+1,2)|(i,j-1,3)|(i-1,j,1)|both|
| 2(左)|(i,j+1,2)|(i-1,j,1)|(i+1,j,0)|both|(i,j+1,2)|
| 3(右)|(i,j-1,3)|(i+1,j,0)|(i-1,j,1)|both|(i,j-1,3)|

Data.Graphが微妙に使いづらいけどがんばって合わせて、一気に書き上げた。

# パート2

全ての位置からパート1と同じ計算をして、最大値を取り出す。
なのでパート1の本体を部分関数に括りだして共通化する。
