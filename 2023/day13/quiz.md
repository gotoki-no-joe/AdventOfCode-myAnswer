# 13 日目: 発生点

(incident 2.事故、災害などが起きること 4(物理)a.入射)

あなたの助けを借りて、hot springsチームは**溶岩島**の端まできれいかつ正確にあなたを送り出す適切なスプリングを見つけます。

問題が1つだけあります。**溶岩**がどこにもありません。

確かに、たくさんの灰と火成岩は**あります**。灰色の山のようなものも点在しています。
しばらくして、近くの山々に向かうと、山々の間の谷が大きな**鏡**で完全に埋め尽くされていることに気づきました。
ほとんどの**鏡**は一貫した方法で位置合わせされているように見えます。
おそらくその方向に向かうべきなのでしょうか？

鏡の谷を進んでいくと、鏡を所定の位置に保持している大きな金属フレームからいくつかの鏡が落ちていることに気づきました。
鏡は非常に平らで光沢があり、落ちた鏡の多くは奇妙な角度で灰の中に突き刺さっています。
地形はすべて一色なので、どこを歩いても安全なのか、どこで鏡にぶつかりそうなのかを見分けるのは困難です。

あなたは、歩いているときに見える灰 (`.`) と岩 (`#`) のパターンを書き留めました（あなたのパズル入力）。
きっと、これらのパターンを注意深く分析することで、鏡がどこにあるのかを見つけられるでしょう！

例えば：

```
#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.

#...##..#
#....#..#
..##..###
#####.##.
#####.##.
..##..###
#....#..#
```

各パターンの反射を見つけるには、2つの行の間の水平線または2つの列の間の垂直線のいずれかで向かい合う
完全な反射を見つける必要があります。

最初のパターンでは、反射は 2 つの列の間の垂直線で向かい合っています。
2つの列のそれぞれにある矢印は、その列の間の線を指しています。

```
123456789
    ><   
#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.
    ><   
123456789
```

このパターンでは、反射線は列5と列6の間の垂直線です。
垂直線はパターンの中央に完全にあるわけではないため、パターンの一部（列1）は反射する位置がなく、無視できます。
それ以外の列にはパターン内に反射した列があり、正確に一致する必要があります。
列2は列9と一致、列3は8と一致、4は7と一致、5は6と一致します。

2番目のパターンは、代わりに水平線で向かい合っています。

```
1 #...##..# 1
2 #....#..# 2
3 ..##..### 3
4v#####.##.v4
5^#####.##.^5
6 ..##..### 6
7 #....#..# 7
```

このパターンは、行4と行5の間の水平線で向かい合っています。
行1は仮想の行8に反射しますが、それはパターンにないため、行1は何とも一致する必要はありません。
残りの行は一致します。行2は行7と一致し、行3は行6と一致し、行4は行5と一致します。

パターンのメモを**要約**するには、反射の各垂直線の左側の**列の数**を合計します。
これに、反射の各水平線の上の**行数に100を乗じたもの**を足します。
上の例では、最初のパターンの垂直線の左側には列が5あり、
2番目のパターンの水平線にはその上に行が4あり、合計は**405**です。

メモ内の各パターンの反射線を見つけます。
**全てのメモを要約して得られる数はいくつですか？**

# パート2

あなたは再び鏡の谷を歩き始めます、そして…**ばちーん！** 鏡にまっすぐぶつかりました。
誰も見ていなかったらよかったのですが、かなり恥ずかしかったでしょうから。

詳しく検査すると、全ての鏡にきっかりひとつずつ**汚れ**があることがわかります。
つまり、ちょうど1つだけ、`.`または`#`がその逆の種類になっています。

各パターンで、**間違った反射線**を正解にする原因となる汚れを見つけて修正する必要があります。
（汚れを修正した後に、古い反射線が正解であるとは限りません。）

上記の例をもう一度示します。

```
#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.

#...##..#
#....#..#
..##..###
#####.##.
#####.##.
..##..###
#....#..#
```

最初のパターンの汚れは左上隅にあります。
左上角の`#`が`.`であったら、これは前とは別の水平方向の反射線を持ちます。

```
1 ..##..##. 1
2 ..#.##.#. 2
3v##......#v3
4^##......#^4
5 ..#.##.#. 5
6 ..##..##. 6
7 #.#.##.#. 7
```

左上隅の汚れが修復されたため、行3と行4の間に新しい水平の反射線が存在します。
行7には対応する反映行がないため無視できますが、他の行はすべて正確に一致します。
行1は行6と一致し、行2は行5と一致し、行3は行4と一致します。

2番目のパターンでは、行2の5番目の記号を`.`から`#`に変更することで汚れを修正できます：

```
1v#...##..#v1
2^#...##..#^2
3 ..##..### 3
4 #####.##. 4
5 #####.##. 5
6 ..##..### 6
7 #....#..# 7
```

これで、パターンの行1と行2の間に前と異なる水平の反射線ができます。

以前と同じようにメモを要約しますが、代わりに新しい別の反射線を使用します。
この例では、最初のパターンの新しい水平の線の上に行が3あり、
2番目のパターンの新しい水平の線の上に行が1あり、値**400**に要約されます。

それぞれのパターンで汚れを修正し、違う反射線を見つけます。
**メモの各パターンの新しい反射線を要約すると、得られる数はいくつですか？**
