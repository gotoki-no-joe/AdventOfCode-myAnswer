# 8日目: 幽霊の出る荒れ地

あなたはまだラクダに乗って砂之島を横断しています。砂嵐が急速に近づいていることに気づきました。
妖精に警告しようと振り向くと、彼女は目の前から消えてしまいます！
公平を期すために言うと、彼女は数分前に**幽霊**についてあなたに警告していました。

ラクダのコブのひとつには「地図」と書かれています。
案の定、その中には砂漠の移動方法に関する文書（あなたのパズル入力）が詰まっています。
少なくとも、それは本物だろうとあなたは確信しています。
文書の1つは左/右指示のリストで、残りの文書はラベル付きノードのある種の**ネットワーク**を説明しているようです。

この**ネットワークを走破する**には、**左/右**の指示を使用することになっているようです。
おそらく、ラクダに同じ指示に従ってもらえば、幽霊の出る荒野から脱出できるのでしょう。

地図を少し調べてみると、`AAA`と`ZZZ`の2つのノードが目に付きます。
今いる場所は`AAA`のような気がするので、`ZZZ`に到達するまで左/右の指示に従わなければなりません。

この形式は、ネットワークの各**ノード**を個別に定義します。例えば：

```
RL

AAA = (BBB, CCC)
BBB = (DDD, EEE)
CCC = (ZZZ, GGG)
DDD = (DDD, DDD)
EEE = (EEE, EEE)
GGG = (GGG, GGG)
ZZZ = (ZZZ, ZZZ)
```

`AAA`から始めて、入力内の次の左/右指示に基づいて次の要素を見つけ出す必要があります。
この例では、`AAA` から始め、`AAA` の右の要素 `CCC` を選択することで**右** (`R`)に進みます。
次に、`L` は `CCC` の左の要素 `ZZZ` を選択することを意味します。
この左右の指示に従うと、2ステップで `ZZZ` に到達します。

もちろん、`ZZZ` はすぐには見つからないかもしれません。
左/右の指示がなくなった場合は、必要に応じて一連の指示全体を繰り返します。
`RL` は実際には `RLRLRLRLRLRLRLRL...` を意味します。
例えば、次の状況にでは `ZZZ` に到達するまでに6ステップかかります。

```
LLR

AAA = (BBB, BBB)
BBB = (AAA, ZZZ)
ZZZ = (ZZZ, ZZZ)
```

`AAA` から始めて、左/右の指示に従ってください。
**`ZZZ` に到達するまでに何ステップかかりますか？**

# パート2

砂嵐が迫っているのに、あなたはまだ荒野からの脱出から遠いです。(?)
ラクダに指示に従ってもらいましたが、開始位置からほとんど離れていません。
脱出するには**はるかに多くのステップ**が必要です！

地図が人間用ではない場合はどうなるでしょう ー 地図が**幽霊**用だったらどうでしょうか？
幽霊も時空の法則に縛られているのでしょうか？それを知る方法はただ一つです。

地図をもう少し詳しく調べると、興味深い事実に注意が向けられます。
名前が `A` で終わるノードの数は、`Z` で終わる数と等しいということです。
もしあなたが幽霊だったらならば、**`A`で終わる全てのノードから開始**し、
`Z` で終わるノードに全員が同時に到達するまで、全ての経路を同時に辿ることでしょう。

例を示します：

```
LR

11A = (11B, XXX)
11B = (XXX, 11Z)
11Z = (11B, XXX)
22A = (22B, XXX)
22B = (22C, 22C)
22C = (22Z, 22Z)
22Z = (22B, 22B)
XXX = (XXX, XXX)
```

ここには2つの開始ノード `11A` と `22A` があります（両方とも`A`で終わるため）。
左右のそれぞれの指示に従うとき、その指示を使用して、現在いる両方のノードから**同時に**移動します。
現在使用している全てのノードが `Z` で**終わる**状態になるまで、この手順を繰り返します。
（あなたの居るノードの一部だけが `Z` で終わる場合、
そこにいる自分は他のノードと同様に動き、通常どおり続行します。）
この例では、次のように進みます：

- ステップ 0: あなたは`11A`と`22A`にいます。
- ステップ 1:`左`側のパスをすべて選択し、`11B`と`22B`に進みます。
- ステップ 2:`右`側のパスをすべて選択し、`11Z`と`22C`に進みます。
- ステップ 3:`左`側のパスをすべて選択し、`11B`と`22Z`に進みます。
- ステップ 4:`右`側のパスをすべて選択し、`11Z`と`22B`に進みます。
- ステップ 5:`左`側のパスをすべて選択し、`11B`と`22C`に進みます。
- ステップ 6:`右`側のパスをすべて選択し、`11Z`と`22Z`に進みます。

したがって、この例では、6ステップ後に`Z`で終わるノードに完全に乗りました。

`A`で終わるすべてのノードから同時に開始します。
**`Z`で終わるノードだけに居るまでに、何ステップかかりますか？**
