# 25日目：停止性問題 #

曲がりくねった通路をCPUの奥深くまでたどると、ようやくコンピュータのコアに到達しました。
ここでは、広大な中央の部屋に、頭上数ナノメートルの高さに吊り下げられた、部屋全体を埋め尽くす壮大な装置があります。

あなたはいつもCPUが騒々しく、混沌とした場所で、活動でにぎわっていると想像していました。
予想に反して、部屋は静かで、動きはなく、そして暗いです。

突然、あなたとCPUのガベージコレクタが互いに驚愕します。
「ここに多くの訪問者が来ることはめったにありません！」と彼は言います。
停止した機械について彼に聞いてみます。

「数ミリ秒前に停止しました。理由はわかりません。私はガベージコレクタであり、医者ではありません。」
あなたはその機械が何のためにあるのか尋ねます。

「最近のプログラムは、その起源がわかりません。
それがチューリングマシンです！
それがコンピュータ全体を機能させるものです。」
あなたはチューリングマシンが単なる計算モデルであると説明しようとしますが、彼はあなたの言葉を遮ります。
「いや、ほら、それは彼らがあなたに考えてほしいことです。
究極的には、すべてのCPUの中に、すべてを駆動するチューリングマシンがあります！
これが壊れているのは残念です。
私たちは命運尽きました！」

あなたはどうしたら手助けできるか尋ねます。
「残念ながら、コンピュータを再び動作させる唯一の方法は、まったく新しいチューリングマシンを最初から作成することですが、それができる方法はありません…」
彼はあなたの顔の表情に気づき、好奇心をそそる一瞥を与え、肩をすくめます。
そして床掃除に戻ります。

あなたはチューリングマシンの詳細設計書（あなたのパズル入力）を、残骸の山の傍らにあるタブレット中に見つけました。
頭上の壊れたチューリングマシンを見上げると、その構成要素の特定を開始できます。

- 0が左右に無限に繰り返されている**テープ**
- テープに沿って左右に移動し、その現在の位置での値を読み取りまたは書き込みできる**カーソル**
- カーソルの下の現在の値に基づいて何をするかに関する規則をそれぞれ含む**状態の集合**

テープのそれぞれの枠は2つの値をとることができます。
0（すべての枠の開始値）と1です。
カーソルが0または1のどちらを指しているかに基づいて、現在の状態は、カーソルの現在の位置に書き込む値、カーソルを左右のどちらかに1枠移動するかどうか、次に使用する状態を示します。

たとえば、次の設計書を見つけたとします。

> Begin in state A.
> 状態Aから開始。
> Perform a diagnostic checksum after 6 steps.
> 6ステップ後に診断チェックサムを実行。
>
> In state A:  
> 状態Aでは：  
>  If the current value is 0:  
>  もし現在の値が0ならば：
>    - Write the value 1.
>    - 値1を書き込む
>    - Move one slot to the right.
>    - 右に1枠移動
>    - Continue with state B.
>    - 状態Bに遷移
>
>  If the current value is 1:  
>  もし現在の値が1ならば：
>    - Write the value 0.
>    - 値0を書き込む
>    - Move one slot to the left.
>    - 左に1枠移動
>    - Continue with state B.
>    - 状態Bに遷移
>
> In state B:  
> 状態Bでは：  
>  If the current value is 0:  
>  もし現在の値が0ならば：
>    - Write the value 1.
>    - 値1を書き込む
>    - Move one slot to the left.
>    - 左に1枠移動
>    - Continue with state A.
>    - 状態Aに遷移
>
>  If the current value is 1:  
>  もし現在の値が1ならば：
>    - Write the value 1.
>    - 値1を書き込む
>    - Move one slot to the right.
>    - 右に1枠移動
>    - Continue with state A.
>    - 状態Aに遷移

リストされた診断チェックサムを実行するために必要なステップ数まで実行すると、テープの内容は以下のようになります。（カーソルが角括弧で印されています）

```
... 0  0  0 [0] 0  0 ... (実行開始前  次に状態Aに遷移)
... 0  0  0  1 [0] 0 ... (1ステップ後 次に状態Bに遷移)
... 0  0  0 [1] 1  0 ... (2ステップ後 次に状態Aに遷移)
... 0  0 [0] 0  1  0 ... (3ステップ後 次に状態Bに遷移)
... 0 [0] 1  0  1  0 ... (4ステップ後 次に状態Aに遷移)
... 0  1 [1] 0  1  0 ... (5ステップ後 次に状態Bに遷移)
... 0  1  1 [0] 1  0 ... (6ステップ後 次に状態Aに遷移)
```

CPUは、（設計書に示されている）所定のステップ数の後に診断チェックサムを実行することにより、チューリングマシンが機能していることを確認できます。
指定されたステップ数が実行されると、チューリングマシンは一時停止する必要があります。
停止したら、テープに現れる1の個数を数えます。
上記の例では、診断チェックサムは3です。

チューリングマシンを再作成し、コンピュータを救いましょう！
再び機能するようになったときにそれが生成する診断チェックサムはいくつですか？

# パート2 #

## スターが足らない場合 ##

チューリングマシンが、続いてコンピュータ全体が復活します。
コンソールが近くでぼんやりと光り、コマンドを待っています。

```
> reboot printer
Error: That command requires priority 50. You currently have priority 0.
エラー：このコマンドは優先度50が必要です。現在の優先度は0です。
You must deposit 50 stars to increase your priority to the required level.
必要なレベルに優先度を上げるには、50のスターを集める必要があります。
```

コンソールが一瞬ちらつき、次に別のメッセージを出力します。

```
Star accepted.
スターを受け付けました。
You must deposit 49 stars to increase your priority to the required level.
必要なレベルに優先度を上げるには、49のスターを集める必要があります。
```

ガベージコレクタは、あなたにウィンクし、掃除を続けます。

プリンタを再起動するのに十分なスターがありません。さらに%d個必要です。

## 49個集めた場合 ##

チューリングマシンが、続いてコンピュータ全体が復活します。
コンソールが近くでぼんやりと光り、コマンドを待っています。

```
> reboot printer
Error: That command requires priority 50. You currently have priority 0.
エラー：このコマンドは優先度50が必要です。現在の優先度は0です。
You must deposit 50 stars to increase your priority to the required level.
必要なレベルに優先度を上げるには、50のスターを集める必要があります。
```

コンソールが一瞬ちらつき、次に別のメッセージを出力します。

```
Star accepted.
スターを受け付けました。
You must deposit 49 stars to increase your priority to the required level.
必要なレベルに優先度を上げるには、49のスターを集める必要があります。
```

ガベージコレクタは、あなたにウィンクし、掃除を続けます。

(ここまで同じか)

プリンタを再起動するのに十分なスターがあります。

# 最後のメッセージ #

50個の星をすべて預けて、プリンターを再起動します。
突然、すべてが以前よりもはるかにピクセル化されていないように見えます。

「…再起動コマンドを送信するのに十分なまで優先度レベルを上げて…
ちょっと見て、印刷中です！
サンタさんに持っていきます。ありがとう！」
彼女は走っていきました。

おめでとう！
Advent of Code 2017ですべてのパズルを完成させました！
私があなたのために作ったのと同じくらい楽しんでそれらを解決したことを願っています。
あなたの冒険について聞いてみたいです。
あなたは私のウェブサイトの連絡先情報またはツイッターを通して私と連絡を取ることができます。

今後、このようなことをもっと見たい場合は、Advent of Codeをサポートし、他の人と共有することを検討してください。

今後のプロジェクトについては、Twitterでフォローしてください。

見逃した場合に備えて、各パズルでイースターエッグを強調表示しました。
それらの上にマウスを置くと、イースターエッグが表示されます。
