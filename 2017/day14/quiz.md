# 14日目：ディスクのデフラグ #

突然、スケジュールされたジョブがシステムの
ディスクデフラグツールを起動します。

状況が違えば
(しばらく座って見ている)[https://www.youtube.com/watch?v=kPv1gQ5Rs8A&t=37]
かもしれませんが、今日はそんな時間はありません。
他の場所で必要とされる貴重なシステム資源が吸い取られているので、
唯一の選択肢はできるだけ早くそのタスクが完了するのを助けることです。

問題のディスクは128 x 128のグリッドで構成されています。
グリッドの各マスは**使用中**(used)かまたは**解放状態**(free)です。
このディスクでは、グリッドの状態は
(結び目ハッシュ)[10日目]の列のビットによって追跡されます。

合計128の結び目ハッシュが計算され、それぞれがグリッド内の1行に対応します。
各ハッシュをなす128ビットはそれぞれグリッドのマスに対応する。
ハッシュの各ビットは、そのマスが解放（0）か使用中（1）かを示します。

ハッシュ入力は（あなたのパズル入力）キー文字列と、
ダッシュ記号、行に対応する0から127の数です。
たとえば、キー文字列が`flqrgnkx`である場合、
最初の行は`flqrgnkx-0`の結び目ハッシュのビットにより与えられ、
2番目の行は`flqrgnkx-1`の、
以下同様に最後の行が`flqrgnkx-127`により与えられます。

結び目ハッシュの出力は伝統的に32桁の16進数で表されます。
これらの各桁は4ビットに対応し全部で4 * 32 = 128ビットになります。
ビットに変換するには、
まずそれぞれの16進数字を等価な2進値に、上位ビットを前にして変換します。
`0`は`0000`に、
`1`は`0001`に、
`e`は`1110`に
`f`は`1111`に、などとなります。
`a0c2017...`で始まるハッシュは2進数では
`10100000110000100000000101110000...`で始まります。

このプロセスを続けると、
キー`flqrgnkx`の最初の8行と列は次のように表示されます。
使用中のマスを`#`で、解放状態のマスを`.`で表します。

~~~
##.#.#..-->
.#.#.#.#
....#.#.
#.#.##.#
.##.#...
##..#..#
.#...#..
##.#.##.-->
|      |
V      V
~~~

この例では、128 x 128グリッド全体で8108マスが使用中です。
実際のキー文字列を考えると、**いくつのマスが使用中ですか？**

あなたのパズル入力は`jzgqcdpd`です。

# パート2 #

さて、デフラグツールが知る必要があるのは**領域**の数だけです。
領域とは**使用中**のマスの集まりで、斜めはなしで**隣接**しているものです。
使用中のすべてのマスは必ず1つの領域内に属します。
孤立した使用中のマスはそれぞれ独立した領域を形成し、
隣接する複数のマスはすべて単一の領域として数えられます。

上記の例では、次の9つの領域が見えており、
それぞれに異なる数を印付けました。

~~~
11.2.3..-->
.1.2.3.4
....5.6.
7.8.55.9
.88.5...
88..5..8
.8...8..
88.8.88.-->
|      |
V      V
~~~

特に興味深いのは、`8`と印した領域です。
この小さな図示では隣接していないように見えますが、
128 x 128グリッド全体を考慮すると、
8と印したすべてのマスは繋がっています。
この例では、全部で1242領域が存在します。

あなたのキー文字列を考えると、**いくつの領域が存在しますか？**
