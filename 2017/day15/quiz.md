# 15日目：決闘ジェネレーター #

ここで、あなたは決闘中のジェネレータ二人と遭遇しました。
**ジェネレータA**と**ジェネレータB**と呼ばれるジェネレータが、
一連の数列について協議しています。
ただし、そのうちの1つが誤動作しているため、
数列は常に一致するとは限りません。

彼らがこれをすると、
**審判**はそれらの各々が次の値を生成するのを待ち、
両方の値の下位16ビットを比較し、
そして値のそれらの部分が一致する回数を追跡します。

両方のジェネレータは同じ原理で動作します。
次の値を作成するために、ジェネレータはそれが生成した前の値を取り、
それに係数（ジェネレータAは16807を使用し、ジェネレータBは48271使用します）
を掛けて、結果の積を2147483647で割った余りを求めます。
その最後の剰余が次に生成する値です。

各ジェネレータの最初の値を計算するために、
代わりに特定の開始値を「前の値」として使用します
（パズルの入力にリストされているとおり）。

たとえば、開始値にジェネレータAが65を使用し、
ジェネレータBが8921を使用するとします。
すると、生成された値の最初の5つの対は次のとおりです。

~~~
--Gen. A--  --Gen. B--
   1092455   430625591
1181022009  1233683848
 245556042  1431495498
1744312007   137874439
1352636452   285222916
~~~
2進数では、これらの対は次のようになります。
（各対のひとつめはジェネレータAの値です。）

~~~
00000000000100001010101101100111
00011001101010101101001100110111

01000110011001001111011100111001
01001001100010001000010110001000

00001110101000101110001101001010
01010101010100101110001101001010

01100111111110000001011011000111
00001000001101111100110000000111

01010000100111111001100000100100
00010001000000000010100000000100
~~~

ここでは、3番目の値の下位（右側）16ビットが
`1110001101001010`で一致していることがわかります。
この一致のため、これら5つの対を処理した後、
審判はその合計に1だけ足すでしょう。

有意ななサンプルを入手するために、審判は4000万対を検討したいと思います。
（上記の例では、審判は最終的に
それらの下位16ビットで一致する対を588個見つけるでしょう。）

4000万対の後、**審判が最終的に数えた一致する対の数はいくつですか？**

# パート2 #

もう少しうまく揃えようとすると、
ジェネレータは実際に審判に渡す数字についてよりうるさくなります。

彼らはまだ同じ方法で値を生成しますが、
今では彼らが審判に値を渡すのはそれが彼らの**基準**を満たすときだけです：

- ジェネレータAは**4**の倍数の値を探します。
- ジェネレータBは**8**の倍数の値を探します。

各ジェネレータは完全に**独立して**機能します。
両方とも完全に独自に値を調べ、時おり基準を満たす値を審判に渡します。
それ以外の場合は、値が見つかるまで以前と同じ一連の値を処理します。

審判は、各ジェネレータが値を提供するのを待ち、
それらを比較します（以前と同じ比較方法を使用します）。
値を受け取る順番を追跡します。
各ジェネレータからの最初の値、
次に各ジェネレータからの2番目の値、
次に3番目の値というように比較されます。

上記の例の開始値を使用して、
ジェネレータはそれぞれ次の最初の5つの値を生成します。

~~~
--Gen. A--  --Gen. B--
1352636452  1233683848
1992081072   862516352
 530830436  1159784568
1980017072  1616057672
 740335192   412269392
~~~

これらの値は、次の対応するバイナリ値を持ちます。

~~~
01010000100111111001100000100100
01001001100010001000010110001000

01110110101111001011111010110000
00110011011010001111010010000000

00011111101000111101010001100100
01000101001000001110100001111000

01110110000001001010100110110000
01100000010100110001010101001000

00101100001000001001111001011000
00011000100100101011101101010000
~~~

残念ながら、
この変更によって平均的に多くのビットが類似するようになったとしても、
これらの値の下位16ビットはひとつも一致しません。
今や、審判が最初の一致を見つけたのは1056組目までです。

~~~
--Gen. A--  --Gen. B--
1023762912   896885216

00111101000001010110000111100000
00110101011101010110000111100000
~~~

この変更はジェネレータをはるかに遅くします、
そして審判は焦り始めています。
今では**500万対**だけを検討するつもりです。
（上記の例の値を使用すると、500万対後に、
審判は最終的に合計309の下位16ビットで一致する対を見つけます。）

500万ペア後、この新しいジェネレータロジックを使用して、
**審判の最終的なカウントは何ですか？**
