# 21日目：フラクタルアート #

アートを生成しようとしているプログラムを見つけました。
それは、一式の規則を通じて画像の詳細を繰り返し強調するという奇妙なプロセスを使用しています。

画像は、オン (`#`) またはオフ (`.`) のいずれかであるピクセルの2次元の正方格子で構成されています。
プログラムは常に次のパターンで始まります。

```
.#.
..#
###
```

このパターンは幅と高さの両方が3ピクセルであるため、大きさ3と呼びます。

そして、プログラムは次のプロセスを繰り返します。

- 大きさが2で割り切れるならば、ピクセルを2x2正方形に分割し、対応する強調規則に従って各2x2正方形を3x3正方形に変換します。
- それ以外の場合、サイズは3で割り切れます。
ピクセルを3x3正方形に分割し、対応する強調規則に従って各3x3正方形を4x4正方形に変換します。

ピクセルの各正方形はより大きなものに置き換えられるため、画像のピクセルは増加し、大きくなります。

アーティストの強調規則の本が近くにあります（パズルの入力）。
しかし、ルールが抜けているようです。
アーティストは、一致するものを見つけるために、入力パターンを回転または反転する必要がある場合があると説明しています。
（ただし、出力パターンは回転も反転もしないでください。）
各パターンは簡潔に記述されています。
行は上から下に並べられ、スラッシュ文字で区切られてひとかたまりで示されます。
たとえば、次の規則はそれぞれ隣接するパターンに対応しています。
(adjacent, というかこれ「規則」ではない。)

```
../.#  =  ..
          .#

                .#.
.#./..#/###  =  ..#
                ###

                        #..#
#..#/..../#..#/.##.  =  ....
                        #..#
                        .##.
```

使用する規則を検索するときは、必要に応じてパターンを回転および反転します。
たとえば、次のパターンはすべて同じ規則に一致します。

```
.#.   .#.   #..   ###
..#   #..   #.#   ..#
###   ###   ##.   .#.
```

本に次の2つのルールが含まれているとします。

```
../.# => ##./#../...
.#./..#/### => #..#/..../..../#..#
```

前と同様に、プログラムは次のパターンで始まります。

```
.#.
..#
###
```

パターンの大きさ (3) は2で割り切れませんが、3で割り切れます。
それは1つの正方形に分割されます。
正方形は2番目の規則と一致し、次のようになります。

```
#..#
....
....
#..#
```

この強調されたパターンの大きさ (4) は2で割り切れるので、その規則が使用されます。それは4つの正方形に均等に分割されます：

```
#.|.#
..|..
--+--
..|..
#.|.#
```

これらの正方形はどれも同じ規則 (`../.# => ##./#../...`) に一致し、そのうちの3つは、規則に合わせるためにいくらかの反転と回転が必要です。
規則の出力は、4つの場合すべてで同じです。

```
##.|##.
#..|#..
...|...
---+---
##.|##.
#..|#..
...|...
```

最後に、正方形が新しいパターンに結合されます。

```
##.##.
#..#..
......
##.##.
#..#..
......
```

したがって、2回の反復後、パターンにはオンのピクセルが12含まれます。

5反復後には何ピクセルがオンになっていますか？

# パート2 #

18反復後には何ピクセルがオンになっていますか？
