# 17日目：スピンロック #

突然、遠くで渦巻く、巨大なピクセル化されたハリケーンのようなもの気づきました。それは致命的なスピンロックです。
このスピンロックは、計算能力だけでなくメモリも消費します。
広大なデジタルの山々が地面から引き裂かれ、渦によって消費されています。

すばやく移動しない場合は、そのプリンターを修正することで問題が最も少なくなります。
(If you don't move quickly, fixing that printer will be the least of your problems. ???)

このスピンロックのアルゴリズムは単純ですが効率的であり、進路上のすべてのものを高速に消費します。
これは唯一の値0のみを含む循環バッファで始まります。これを現在の位置としてマークします。
次に、循環バッファを数ステップ（パズル入力）進み、停止した値の後に最初の新しい値1を挿入します。挿入した値が現在位置になります。
次に、そこから同じステップ数だけ前進し、停止した場所の後に2番目の新しい値2を挿入し、それを新しい現在の位置として再び使用します。

スピンロックはこの前進しては新しい値を挿入し、そして新たな現在位置として挿入された値の位置を使用する手順を合計2017回繰り返し、最後の動作として2017を挿入し、（0を含む）全部で2018の値を持つ循環バッファが得られます。

たとえば、スピンロックが挿入ごとに3回ステップする場合、循環バッファは次のように成長し始めます。（アルゴリズムの各反復後の現在の位置を括弧で印します。）

- `(0)` ：挿入前の初期状態。
- `0 (1)` ：スピンロックが前方に三回ステップ（`0`、`0`、`0`）、その後、最初の値1を挿入します。その後、1が現在の位置になります。
- `0 (2) 1` ：スピンロックが前方に三回ステップ（`0`、`1`、`0`）、次いで、第2の値2を挿入します。その後、2が現在の位置になります。
- `0  2 (3) 1` ：スピンロックが前方に三回ステップ（`1`、`0`、`2`）、次いで、第3の値3を挿入します。その後、3が現在の位置になります。

以降も同様に進み、

```
0  2 (4) 3  1
0 (5) 2  4  3  1
0  5  2  4  3 (6) 1
0  5 (7) 2  4  3  6  1
0  5  7  2  4  3 (8) 6  1
0 (9) 5  7  2  4  3  8  6  1
```

最終的に、2017回の挿入の後、循環バッファの最後の挿入の近くの範囲は次のようになります。

```
1512  1134  151 (2017) 638  1513  851
```

おそらく、最後に書き込まれる値 (2017) の次にくる値を特定できれば、スピンロックを短絡させることができます。この例では、それは638になります。

あなたの完成した循環バッファで2017の次の値は何ですか？

# パート2 #

狙い通りには行かず、スピンロックは短絡しませんでした。代わりに、さらに怒り狂いました。少なくとも、あなたにはそう見えました。少し前よりもかなり速く回転しています。

あなたには良い知らせと悪い知らせがあります。

良いニュースは、スピンロックを停止させる方法の計算を改善できたことです。実は、循環バッファの現在の状態における0の次の値を特定する必要があるとわかりました。

悪いニュースは、あなたがそのことを調べている間に、スピンロックがその5000万番目の値、つまり50000000を挿入し終えたところだということです。

50000000が挿入された瞬間の0の次の値は何ですか？
