# 3日目：螺旋の記憶 #

無限の2次元グリッド上に保存された実験的な新しい種類のメモリに遭遇しました。

グリッド上の各マスは、1と記された位置から始まり、
外向きに渦巻き状に数え上げていく螺旋パターンで割り当てられます。
たとえば、最初の数個のマスは次のように割り当てられます。

~~~
17  16  15  14  13
18   5   4   3  12
19   6   1   2  11
20   7   8   9  10
21  22  23---> ...
~~~

これは非常に空間効率が良く（数え漏らす四角形はありません）、
要求されたデータは
（このメモリシステムの唯一のアクセスポートの場所である）
番号1のマスへと
上下左右にしか移動できないプログラムによって
戻される必要があります。
彼らは常に
データの場所とマス1との間のマンハッタン距離で
最短経路をとります。

例えば：

- マス1のデータは、アクセスポートにあるので、0ステップが行なわれます。
- マス12のデータは、下、左、左の3ステップを実行します。
- マス23のデータは、上を2ステップ実行するだけです。
- マス1024のデータは31ステップを実行する必要があります。

あなたのパズルに記載されているマスからのデータを
アクセスポートに届けるには何ステップが必要ですか？

あなたのパズル入力は368078です。

# パート2 #

システムに対するストレステストとして、
このプログラムはグリッドをクリアし、値1をマス1に保存します。
次に、上に示したのと同じ割り当て順序で、
斜めを含むすべての隣接するマスの値の合計を格納します。

したがって、最初のいくつかのマスの値は次のように選択されます。

- マス1は値1で始まります。
- マス2は隣接するマスで値のあるものがひとつだけなので、同じく1が格納されます。
- マス3は、上記のマス両方と隣接するので、それらの値の合計2を格納します。
- マス4は上記3つ全てのマスと隣接し、それらの値の合計4を格納します。
- マス5は、マス1とマス4だけが隣接するので、値5を得ます。

マスは値が一度書かれると、その値は変更されません。
したがって、最初のいくつかのマスには次の値が与えられます。

~~~
147  142  133  122   59
304    5    4    2   57
330   10    1    1   54
351   11   23   25   26
362  747  806--->   ...
~~~
マスに書かれる値の中で、
あなたのパズル入力の値より**大きい最初に書かれる値**は何でしょう？
