# 23日目：金庫破り #
--- Day 23: Safe Cracking ---

ここはEBHQで最も素敵な高層ビルの最上階の一角です。
イースターバニーのプライベートオフィスがここにあり、絵の後ろに金庫が隠されています。絵の後ろの金庫に星を隠さない人はいますか？

金庫には、コード入力用のデジタル画面とキーパッドがあります。金庫に貼られている付箋には、パスワードのヒント「eggs」と書かれています。絵は大きなウサギがいくつかの卵を着色している​​ものです。卵は7つです。

ところが、コードを入力しようとすると、ディスプレイには何も表示されません。代わりに、キーパッドが手の中でバラバラになり、明らかに破壊されたようです。
その背後には、ある種のソケットがあります。これは、プロトタイプコンピュータ(day11)のコネクタに適合するものです！
破壊されたキーパッドを引き離して論理回路を取り出し、コンピュータに接続して、コンピュータを金庫に接続します。

ここで、キーパッドが金庫に送信する出力を把握する必要があります。ロジックチップ（パズル入力）からアセンバニーコード(day12)を抽出しました。
コードは、モノレールコンピュータ(day12)が使用したのとほぼ同じアーキテクチャと命令セットを使用しているように見えます！これには、そのときと同じアセンバニーインタプリタを使用できるはずですが、新しい命令が１つあります。

`tgl x` （jnzと同様に正は順方向を意味し、負は逆方向を意味する形で命令を指し示して）、命令xを切り替えます：

- 1引数の命令については、`inc`は`dec`となり、他のすべての1引数の命令は`inc`になります。
- 2引数の命令については、`jnz`は`cpy`となり、他のすべての2引数命令は`jnz`になります。
- 切り替えられた命令の引数は影響を受けません。
- プログラム外の命令を切り替えようとしても、何も起こりません。
- 切り替えによって無効な命令（`cpy 1 2`など）が生成され、後でその命令を実行しようとした場合は、飛ばしてください。
- `tgl`がそれ自体を切り替える場合（例えば、`a`が0の場合、`tgl a`はそれ自体を対象として`inc a`となる）、得られた命令は、次にそこに到達するまで実行されません。

たとえば、次のプログラムがあるとします。

```
cpy 2 a
tgl a
tgl a
tgl a
cpy 1 a
dec a
dec a
```

- `cpy 2 a` レジスタaを2に初期化します。
- 1つめの`tgl a`はそこからa (2)離れた命令を切り替えます。これにより、3つめの`tgl a`は`inc a`に変更されます。
- 2つめの`tgl a`もそこから2離れた命令を変更し、それにより`cpy 1 a`が`jnz 1 a`に変化します。
- 4行目は今や`inc a`で、aを3に増分します。
- 最後に、5行目は現在`jnz 1 a`で、a (3)命令先に飛び、`dec a`命令を飛び越します。

この例では、レジスタaの最終値は3です。

電子回路の残りの部分は、キーパッドの入力（卵の個数である7）をレジスタaに配置し、コードを実行してから、レジスタaに残された値を金庫に送信しているようです。

金庫にどのような値を送るべきですか？

# パート2 #

金庫は開きません。代わりに苛立ちを表現するかのように険悪な物音を立てました。

あなたはあなたの論理が正しく働いていると確信しているので、他の唯一のことは…あなたは絵をもう一度確認します。
着色された卵もまた卵だということらしいです。数えなおすと卵は12あります。

この新しい入力でプログラムを実行すると、プロトタイプコンピュータが過熱し始めます。
何がそんなに時間がかかっているのか、
そして「1を足す」よりも強力な命令がないことがそれと関係があるのか​​どうか疑問に思います。
ウサギたちは通常、掛け算をしなかっただろうか？

とにかく、実際には金庫にどのような値を送るべきですか？

(hint.txtにヒントを残した。memo.txtには種明かしがある。)
