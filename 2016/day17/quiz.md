# 17日目：2歩前進 #

ドアで接続された4x4格子状の小部屋で保護された安全な金庫室にアクセスしようとしています。
左上の部屋（`S`と印しました）から出発、右下の部屋に到達すると金庫室（`V`と印しました）にアクセスできます。

~~~
#########
#S| | | #
#-#-#-#-#
# | | | #
#-#-#-#-#
# | | | #
#-#-#-#-#
# | | |  
####### V
~~~

固定の壁は`#`で印され、ドアは`-`または`|`で印しています。

あなたの**現在の部屋**のドアは開いているか閉じている（そしてロックされている）かのいずれかです。
ドアの状態はパスコード（あなたのパズル入力）に**あなたがこれまでに移動した経路**を表す大文字
（上が`U`、下が`D`、左が`L`、右が`R`）の列を続けたもののMD5ハッシュの16進数表現に基づいて決まります。

ハッシュの先頭4文字のみが使用されます。
それらは現在の位置から順に**上、下、左、右**のドアを表します。
`b`,`c`,`d`,`e`,`f`は、対応するドアが**開いている**ことを意味します。
その他の文字（数字または`a`）は、対応するドアが**閉じられてロックされている**ことを意味します。

金庫室にアクセスするには、右下の部屋にたどり着けばよいです。
この部屋に到達すると、金庫と迷路のすべてのドアが開きます。

たとえば、パスコードが`hijkl`であるとします。
最初は移動していないので、経路は空文字列です。`hijkl`だけのMD5ハッシュを求めます。
その先頭4文字は`ced9`で、これは、
上が開いている（c）、下が開いている（e）、
左が開いている（d）、右が閉じてロックされている（9）ことを示します。
左上隅から開始するため、開く「上」や「左」のドアはないため、選択できるのは**下**だけです。

次に、1ステップ（下、または`D`）だけんだ後、`hijklD`のハッシュを求めます。
これにより`f2bc`が生成されます。
これは、上、左（ただし壁）、または右に行くことができることを示しています。
右に進むということは`hijklDR`のハッシュを求めてして`5745`を得ることを意味します
ーすべてのドアが閉じられ、ロックされています。
その代わりに**上**に行くことは価値があります。
これは出発した部屋に戻ることになりますが、経路は`DU`となり、これは**異なるドア**を開けます。

`DU`と進んだ（そして`hijklDU`のハッシュ`528e`を得た）後は、右のドアだけが開いています。
`DUR`と進んだ後、すべてのドアがロックされます。
（幸い、あなたの実際のパスコードは`hijkl`ではありません）。

イースターバニー金庫室セキュリティで実際に使用されるパスコードは、
正しいパスを知っている場合、金庫室へのアクセスを許可します。例えば：

- パスコードが`ihgpwlah`の場合、最短経路は`DDRRRD`になります。
- `kglvqrro`では、最短経路は`DDUDRLRRUDRD`になります。
- `ulqzkmiv`では、最短経路は`DRURDRUDDLLDLUURRDULRLDUUDDDRR`になります。

あなたの金庫室のパスコードでは、金庫室に到達するための**最短経路**（長さではなく実際の経路）は何ですか？

あなたのパズルの入力は`hhhxzeay`です。

# パート2 #

このセキュリティが実際にどれほど堅牢であるかを知りたくなったあなたは、
金庫室にアクセスできる経路をどんどん長くすることにしました。
経路は、右下の部屋に最初に到達したときに常に終了することに注意してください。
（つまり、経路は右下の部屋を通過できず、そこで終了することしかできません。）

例えば：

- パスコードが`ihgpwlah`の場合、最長経路は370ステップです。
- `kglvqrro`では、最長経路は492ステップになります。
- `ulqzkmiv`では、最長経路は830ステップになります。

金庫室に到達する**最長経路の長さ**はどれだけですか？
