# 11日目：宇宙警察 #

木星へ向かう途中で、あなたは**宇宙警察**に呼び止められました。

「そこのマークなし宇宙船！あなたは宇宙法に違反しています！
すべての宇宙船ははっきり見える**登録識別子**を持っている必要があります！
24時間以内に遵守しないと宇宙刑務所に送られます！」

宇宙刑務所に送られたくはないので、助けを求めて地球上の妖精に無線で連絡します。
妖精からの返答の信号が届くまでに3時間近くかかりましたが、
**緊急船体塗装ロボット**の電源を入れる手順を送信し、
さらに船を適切に塗装する小さな[Intcodeプログラム](../day9/quiz.md)（パズル入力）を提供してくれました。

問題が1つだけあります。緊急船体塗装ロボットがありません。

新しい緊急船体塗装ロボットを組み立てる必要があります。
ロボットはあなたの宇宙船の側面にある正方形のパネルのグリッド上を動き回り、
現在のパネルの色を検出し、現在のパネルを**黒**または**白**にペイントできる必要があります。
（全てのパネルは現在**黒**です。）

Intcodeプログラムはロボットの頭脳として機能します。
プログラムは入力命令を使用してロボットのカメラにアクセスします。
ロボットが黒いパネルの上にあるとき0、
ロボットが白いパネルの上にあるとき1が入力されます。
するとプログラムは2つの値を出力します。

- まずプログラムはロボットが乗っている**パネルを塗る色**を出力します：
0はパネルを**黒**く塗ることを、
1はパネルを**白**く塗ることを意味します。
- 次に**ロボットが旋回するべき方向**を示す値を出力します：
0は左に90度旋回することを、
1は右に90度旋回することを意味します。

ロボットは旋回した後、常に**ちょうどパネル1枚ぶん前方に**移動します。
ロボットは**上**向きで開始します。

ロボットはしばらくこのように動作し続け、描画を完了すると停止します。
このプロセス中は、ロボット内部のIntcodeコンピュータを再起動しないでください。

たとえば、ロボットが実行を開始しようとしているとします。
黒のパネルを`.`、白のパネルを`#`、
そしてロボットとそれが向いている方向を(`< ^ > v`)を描くと、
初期状態とロボット周辺の領域は次のようになります。

```
.....
.....
..^..
.....
.....
```

ロボットの下のパネル（代わりに`^`が表示されているためここでは表示されていません）も黒であるため、
この時点での入力命令には`0`を与える必要があります。
最終的にロボットが`1`を出力（白で塗る）してから`0`を出力（左旋回）するとします。
これらの動作を実行して1パネル進んだ後、この領域は次のようになります。

```
.....
.....
.<#..
.....
.....
```

入力命令はやはり`0`を与えられます。
次に、ロボットは`0`を出力（黒で塗る）してから`0`（左旋回）するとしましょう。

```
.....
.....
..#..
.v...
.....
```

さらに`1,0`, `1,0`と出力した後：

```
.....
.....
..^..
.##..
.....
```

ロボットは開始位置に戻りましたが、現在は白いパネル上にあるため、
入力命令には`1`が与えられる必要があります。
さらにいくつかの出力(`0,1`, `1,0`, `1,0`)の後、
領域は次のようになります。

```
.....
..<#.
...#.
.##..
.....
```

ロボットを出動させる前に、ロボットが塗装する面積の推定値がおそらく必要です。
具体的には、色は無視して**少なくとも一度は塗装するパネルの数**を知る必要があります。
上の例では、ロボットは**パネル6枚**を少なくとも一度塗りました。
（開始位置のパネルを二度塗りましたが、そのパネルは1枚としてだけ数えられます。
終了位置のパネルは塗りませんでした。）

新しい緊急船体塗装ロボットを組み立て、その上でIntcodeプログラムを実行します。
**何枚のパネルが少なくとも一度は塗装されますか？**

# パート2 #

ロボットが塗装しようとしているものが何なのかよくわかりませんが、
どう見てもそれは**登録識別子**ではありません。
宇宙警察はイライラしてきました。

船外カメラをもう一度確認すると
「緊急船体塗装ロボット開始パネル」と印された白いパネルに気づきました。
その他のパネルは**やはり黒**ですが、ロボットは黒ではなく**白いパネルから開始**することを期待していたようです。

宇宙警察が船の窓の1つに貼り付けた宇宙法の宇宙パンフレットによると、
正しい登録識別子は必ず**大文字8文字**です。
単一の**白いパネル**でロボットを起動した後、
ロボットは船体に**どのような登録識別子を塗装しますか？**
