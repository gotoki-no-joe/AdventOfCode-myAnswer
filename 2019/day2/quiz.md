# 2日目：1202プログラムアラーム #

月の重力による**スイングバイ**に向かう途中で、
船のコンピューターが「**1202プログラムアラーム**」に関して腹立たしげにビープ音を発しました。
無線で妖精がすでにその状況に対処する方法を説明しています。
「心配しないでください、それは完全に普通の…」
船のコンピューターが炎上四散しました。

コンピューターが**紫煙**を上げたようだと妖精に報告しました。
「そのコンピュータは、実行中だった重力アシストプログラムのような*Intcode*プログラムを実行します。
新しいIntcodeコンピュータを構築するのに十分なスペア部品が確かにあります！」

Intcodeプログラムは（`1,0,0,3,99`のような）コンマで区切られた整数のリストです。
プログラムを実行するには、（位置0と呼ばれる）最初の整数を見ることから始めます。
ここで*オペコード*（1,2,99のいずれか）を見つけるでしょう。
オペコードは何をすべきかを示します。
例えば、99はプログラムが終了し、すぐに停止するべきであることを意味します。
未知のオペコードに遭遇するとは、何かがうまくいかなかったということです。

オペコード1 は、2つの位置から読み取った数値を加算し、結果を3番目の位置に格納します。
オペコードの*直後の*三つの整数がこれらの三つの位置を教えます。
最初の二つはあなたが入力値を読み込む必要がある*位置*を示し、
3番目は出力が保存されるべき*位置*を示します。

例えば、もしIntcodeコンピューターが`1,10,20,30`に遭遇した場合、
位置10および位置20の値を読み取り、それらの値を加算し、位置30の値をその合計で上書きする必要があります。

オペコード2は、2つの入力を足し算する代わりに*掛け算*することを除いて、
オペコード1とまったく同じように動作します。
こちらもやはり、オペコードの後の3つの整数は、値ではなく入力と出力の*位置*を示します。

あなたは、オペコードの処理を完了したら、
前方に位置を4だけ進めて*次の命令に移り*ます。

例えば次のプログラムがあるとします。

```
1,9,10,3,2,3,11,0,99,30,40,50
```

説明のために、同じプログラムを複数の行に分割したものを示します。

```
1,9,10,3,
2,3,11,0,
99,
30,40,50
```

最初の4つの整数 `1,9,10,3` は位置0,1,2,3にある。
合わせて、最初のオペコード（1、加算）、2つの入力の位置（9および10）、出力の位置（3）を表します。
このオペコードを処理するには、最初に入力位置の値を取得する必要があります：
位置9には30があり、位置10には40があります。
これらの数値を*足し合わせて*40を得ます。
次にこの値を出力位置に保存します。
ここで出力位置の数3は位置3にあるするので、それは自分自身を上書きします。
その後、プログラムは次のようになります。

```
1,9,10,70,
2,3,11,0,
99,
30,40,50
```

次のオペコード2に到達するために位置を4進めます。
このオペコードは前と同じように動作しますが、加算する代わりに乗算します。
入力は位置3および位置11にあります。
これらの位置にはそれぞれ70と50が含まれます。
これらを乗算すると3500を得て、これは位置0に保存されます：

```
3500,9,10,70,
2,3,11,0,
99,
30,40,50
```

さらに位置を4進めるとオペコード99に到達し、プログラムが停止します。

いくつかの小規模プログラムの初期状態と最終状態を以下に示します。

- `1,0,0,0,99` は `2,0,0,0,99`（1 + 1 = 2）となります。
- `2,3,0,3,99` は `2,3,0,6,99`（3 * 2 = 6）となります。
- `2,4,4,5,99,0` は `2,4,4,5,99,9801`（99 * 99 = 9801）となります。
- `1,1,1,4,99,5,6,0,99` は `30,1,1,4,2,5,6,0,99` になります。

正常に動作するコンピューターを入手したら、
最初のステップは、重力アシストプログラム（パズル入力）を
最後にコンピュータが発火した直前の「1202プログラムアラーム」状態に戻すことです。
これを行うには、*プログラムを実行する前に*位置1を値12に置き換え、
位置2を値2で置き換えます。
プログラムが停止した後の位置0に残っている値は何ですか？

# パート2 #

「いいですね、新しいコンピュータは正常に動作しているようです。
このミッション中は*手元に置いて*おいてください。おそらく再び使用するでしょう。
本物のIntcodeコンピュータは、今作ったコンピュータよりも多くの機能に対応していますが、
それらは必要になったときに教えます。」

「しかし、あなたの現在の優先事項は、月の周りでスイングバイを完了することです。
このミッションを成功させるために、私たちはあなたが既に組み立てた部品の用語を決める必要があります。」

Intcodeプログラムは整数のリストとして提供されます。
これらの値は、コンピューターの*メモリ*の初期状態として使用されます。
Intcodeプログラムを実行するときは、メモリをプログラムの値に初期化することから始めてください。
メモリ内の位置は*アドレス*と呼ばれます。
（例えば、メモリ内の最初の値は「アドレス0」にあります。）

（1,2,99のような）オペコードは、*命令*の先頭を位置づけます。
オペコードの直後に使用される値がある場合、その値は命令の*オペランド*と呼ばれます。
例えば、命令 `1,2,3,4` において、1はオペコードで2,3,4はオペランドです。
命令99はオペコードのみが含まれ、オペランドはありません。

現在の命令のアドレスは*命令ポインタ*と呼ばれます。0から始まります。
命令が完了すると、命令ポインタは*命令中の値の個数*だけ増加します。
コンピュータにさらに命令を追加するまで、
加算命令と乗算命令についてはこれは常に4（1オペコード+ 3オペランド）となります。
（停止命令は命令ポインタを1増加させますが、プログラムを停止させます。）

「用語を片付けたら、先に進む準備ができています。
スイングバイを完了するには、*どのような入力対が出力`19690720`を生成するかを定める*必要があります。」

プログラムへの入力は、前と同様にアドレス1と2の値を置き換えることで与えられます。
このプログラムでは、アドレス1に置かれた値1は*名詞*と呼ばれ、
アドレス2に置かれた値は*動詞*と呼ばれます。
2つの入力値はそれぞれ、0と99の間になります（端を含む）。

プログラムが停止するとその出力はアドレス0にあるのも前と同様です。
一対の入力を試みるたびに、最初にコンピュータのメモリをプログラムの値（パズル入力）にリセットしてください。
つまり、前回の試行からメモリを再利用しないでください。

プログラムに出力`19690720`を生成させる入力の名詞と動詞を見つけてください。
*`100 * 名詞 + 動詞`はいくつですか？*
（例えば、名詞=12で動詞=2のとき、答えは`1202`になります。）
