# 16日目：欠陥周波数伝送 #

あなたは[巨大ガス惑星](https://ja.wikipedia.org/wiki/%E3%82%AC%E3%82%B9%E3%82%B8%E3%83%A3%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88)
を3/4ほど通過しました。
地球との通信は往復が5時間かかるだけでなく、信号品質も非常に悪いです。
欠陥周波数伝送(Flawed Frequency Transmission, **FFT**)
アルゴリズムを使用して信号を補正できます。

入力としてFFTは数値のリストを取ります。
あなたの受信した信号（あなたのパズル入力）では各数は一桁です：
`15243`のようなデータが列`1, 5, 2, 4, 3`を表します。

FFTは繰り返す**フェーズ**で動作します。
各フェーズで入力リストと同じ長さの新しいリストが作成されます。
この新しいリストは次のフェーズの入力としても使用されます。

新しいリストの各要素は、入力リストのすべての値に繰り返す**パターン**の値を掛けてその結果を合計することで作成されます。
したがって、入力リストが`9, 8, 7, 6, 5`である要素のためのパターンが`1, 2, 3`の場合、
結果は`9*1 + 8*2 + 7*3 + 6*1 + 5*2`（各入力要素が各乗算の左側にあり、繰り返しパターンの各値が各乗算の右側にある）になります。
その後1の位のみが保持されます。`38`は`8`になり、`-17`は`7`になります。

出力配列の各要素はすべて同じ入力配列要素を使用しますが、
使用する繰り返しパターンは**計算される出力要素がどれか**に依存します。
基本パターンは`0, 1, 0, -1`です。
次に、考えている**出力リスト内の位置**に等しい回数、パターン内の各値を繰り返します。
最初の要素に対しては1回、2番目の要素に対しては2回、3番目の要素に対しては3回、というように繰り返します。
したがって、出力リストの3番目の要素が計算されている場合、
値を繰り返すと次のようになります： `0, 0, 0, 1, 1, 1, 0, 0, 0, -1, -1, -1`

パターンを適用するとき、最初の値を1回だけ飛ばします。
（言い換えれば、パターン全体を左に1だけずらします。）
したがって、出力リストの2番目の要素では、
実際に使用されるパターンは次のようになります：
`0, 1, 1, 0, 0, -1, -1, 0, 0, 1, 1, 0, 0, -1, -1, ...`

このプロセスを使用して出力リストの各要素を計算した後、フェーズが完了し、
このフェーズの出力リストが次のフェーズ（もしあれば）の新しい入力リストとして使用されます。

入力信号`12345678`が与えられたとして、以下にFFTの4つのフェーズを示します。
各フェーズ内で、各出力桁は1行で計算され、結果は右端にあります。
各乗算演算では、左側に入力数字が、右側にパターン値が表示されます。

```
入力信号: 12345678

1*1  + 2*0  + 3*-1 + 4*0  + 5*1  + 6*0  + 7*-1 + 8*0  = 4
1*0  + 2*1  + 3*1  + 4*0  + 5*0  + 6*-1 + 7*-1 + 8*0  = 8
1*0  + 2*0  + 3*1  + 4*1  + 5*1  + 6*0  + 7*0  + 8*0  = 2
1*0  + 2*0  + 3*0  + 4*1  + 5*1  + 6*1  + 7*1  + 8*0  = 2
1*0  + 2*0  + 3*0  + 4*0  + 5*1  + 6*1  + 7*1  + 8*1  = 6
1*0  + 2*0  + 3*0  + 4*0  + 5*0  + 6*1  + 7*1  + 8*1  = 1
1*0  + 2*0  + 3*0  + 4*0  + 5*0  + 6*0  + 7*1  + 8*1  = 5
1*0  + 2*0  + 3*0  + 4*0  + 5*0  + 6*0  + 7*0  + 8*1  = 8

1フェーズ後: 48226158

4*1  + 8*0  + 2*-1 + 2*0  + 6*1  + 1*0  + 5*-1 + 8*0  = 3
4*0  + 8*1  + 2*1  + 2*0  + 6*0  + 1*-1 + 5*-1 + 8*0  = 4
4*0  + 8*0  + 2*1  + 2*1  + 6*1  + 1*0  + 5*0  + 8*0  = 0
4*0  + 8*0  + 2*0  + 2*1  + 6*1  + 1*1  + 5*1  + 8*0  = 4
4*0  + 8*0  + 2*0  + 2*0  + 6*1  + 1*1  + 5*1  + 8*1  = 0
4*0  + 8*0  + 2*0  + 2*0  + 6*0  + 1*1  + 5*1  + 8*1  = 4
4*0  + 8*0  + 2*0  + 2*0  + 6*0  + 1*0  + 5*1  + 8*1  = 3
4*0  + 8*0  + 2*0  + 2*0  + 6*0  + 1*0  + 5*0  + 8*1  = 8

2フェーズ後: 34040438

3*1  + 4*0  + 0*-1 + 4*0  + 0*1  + 4*0  + 3*-1 + 8*0  = 0
3*0  + 4*1  + 0*1  + 4*0  + 0*0  + 4*-1 + 3*-1 + 8*0  = 3
3*0  + 4*0  + 0*1  + 4*1  + 0*1  + 4*0  + 3*0  + 8*0  = 4
3*0  + 4*0  + 0*0  + 4*1  + 0*1  + 4*1  + 3*1  + 8*0  = 1
3*0  + 4*0  + 0*0  + 4*0  + 0*1  + 4*1  + 3*1  + 8*1  = 5
3*0  + 4*0  + 0*0  + 4*0  + 0*0  + 4*1  + 3*1  + 8*1  = 5
3*0  + 4*0  + 0*0  + 4*0  + 0*0  + 4*0  + 3*1  + 8*1  = 1
3*0  + 4*0  + 0*0  + 4*0  + 0*0  + 4*0  + 3*0  + 8*1  = 8

3フェーズ後: 03415518

0*1  + 3*0  + 4*-1 + 1*0  + 5*1  + 5*0  + 1*-1 + 8*0  = 0
0*0  + 3*1  + 4*1  + 1*0  + 5*0  + 5*-1 + 1*-1 + 8*0  = 1
0*0  + 3*0  + 4*1  + 1*1  + 5*1  + 5*0  + 1*0  + 8*0  = 0
0*0  + 3*0  + 4*0  + 1*1  + 5*1  + 5*1  + 1*1  + 8*0  = 2
0*0  + 3*0  + 4*0  + 1*0  + 5*1  + 5*1  + 1*1  + 8*1  = 9
0*0  + 3*0  + 4*0  + 1*0  + 5*0  + 5*1  + 1*1  + 8*1  = 4
0*0  + 3*0  + 4*0  + 1*0  + 5*0  + 5*0  + 1*1  + 8*1  = 9
0*0  + 3*0  + 4*0  + 1*0  + 5*0  + 5*0  + 1*0  + 8*1  = 8

4フェーズ後: 01029498
```

いくつかのより大きな入力の100フェーズ後の最終出力リストの最初の8桁は次のとおりです。

- `80871224585914546619083218645595`は`24176176`になります。
- `19617804207202209144916044189917`は`73745418`になります。
- `69317163492948606335995924319873`は`52432133`になります。

**100**フェーズのFFTの後、**最終出力リストの最初の8桁は何ですか？**

# パート2 #

FFTが機能しているので、**実際の信号**を復号できます。

実際の信号はあなたのパズル入力を**10000回繰り返したもの**です。
この新しい信号を単一の入力リストとして扱います。
パターンは以前と同様に計算され、100フェーズのFFTが引き続き適用されます。

初期入力信号の**最初の7桁**は**メッセージのオフセット**も表しています。
メッセージのオフセットは、最終出力リストの8桁のメッセージの場所です。
具体的には、メッセージのオフセットは8桁のメッセージを読み取る前に**読み飛ばす桁数**を示します。
たとえば、最初の入力信号の最初の7桁が`1234567`の場合、
8桁のメッセージは最終出力リストの`1,234,567`桁を読み飛ばした後の8桁になります。
または、メッセージのオフセットが7で、最終出力リストが`98765432109876543210`の場合、
8桁のメッセージは`21098765`になります。
（もちろん、実際のメッセージのオフセットは`7`のような1桁の数字ではなく7桁の数字になります。）

100フェーズ後の最終出力リストの8桁のメッセージの例を示します。
原文では各入力で指定されたメッセージのオフセットが強調表示されています。
（以下に示す入力は、実際の開始入力リストを得るために10000回繰り返されることに注意してください。）

- `03036732577212944063491565474664`は`84462026`になります。
- `02935109699940807407585447034323`は`78725270`になります。
- `03081770884921959731165446850517`は`53553731`になります。

入力信号を10000回繰り返し、FFTを100フェーズ実行した後、
**最終出力リストに埋め込まれている8桁のメッセージは何ですか？**
