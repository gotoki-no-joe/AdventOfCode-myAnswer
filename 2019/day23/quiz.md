# 23日目：カテゴリー6 #

ドロイドはできる限り船の修理を終えました。
彼らの報告はこれが**カテゴリー6**の災害であったことを示しています。
それは被害の程度ではなく、
[カテゴリー6](https://ja.wikipedia.org/wiki/%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%83%BC6%E3%82%B1%E3%83%BC%E3%83%96%E3%83%AB)の
ネットワークケーブルの備蓄と
船のネットワーク基盤設備の大部分を破壊したためです。

あなたは**ネットワークを最初から再構築する**必要があります。

ネットワーク上のコンピュータは、互いに**パケット**を送信して通信する
標準の[Intcode](../day9/quiz.md)コンピュータです。
コンピュータは全部で50台あり、それぞれが
**ネットワークインタフェースコントローラ**(NIC)ソフトウェア（あなたのパズル入力）
の同じコピーを実行します。
コンピュータは0から49の**ネットワークアドレス**を持っています。
各コンピュータは起動したとき、単一の入力命令を介してネットワークアドレスを要求します。
各コンピュータに一意のネットワークアドレスを必ず指定してください。

コンピュータはひとたびネットワークアドレスを受け取ると、
**パケット**を送受信することにより、ネットワークを介して作業と通信を開始します。
すべてのパケットには、`X`と`Y`という名前の**2つの値**が含まれます。
コンピュータへ送信されたパケットは、受信者によってキューに入れられ、受信した順序で読み取られます。

パケットを別のコンピュータに**送信**するために、
NICは**3つの出力命令**を使用して
パケットの**宛先アドレス**とそれに続いて`X`値と`Y`値を提供します。
たとえば、値`10,20,30`を提供する3つの出力命令は
アドレス10を持つコンピュータへ`X=20`でかつ`Y=30`というパケットを送信します。

別のコンピュータからパケットを**受信**するために、NICは**入力命令**を使用します。
着信パケットキューが**空**の場合は`-1`を提供します。
それ以外の場合は、次のパケットの`X`値を提供します。
次にコンピュータは2番目の入力命令を使用して同じパケットの`Y`値を受け取ります。
この方法でパケットの両方の値が読み取られると、パケットはキューから削除されます。

これらの入出力命令が決してブロックしないことに注意してください。
具体的には、出力命令は送信したパケットの受信を待ちません。
コンピュータは、パケットが受信される前に複数のパケットを送信することがありえます。
同様に、入力命令はパケットの到着を待機しません。
待機しているパケットがない場合、入力命令は`-1`を受信する必要があります。

50台すべてのコンピュータを起動し、ネットワークに接続します。
**アドレス255に送信された最初のパケットの`Y`値は何ですか？**

# パート2 #

アドレス255に送信されたパケットは
NAT（Not Always Transmitting, 常時送信しない）
と呼ばれるデバイスによって処理されます。
NATは、特定のパケットをブロックし、
コンピュータのアイドル期間を監視することにより、
ネットワークの電力消費を管理します。

パケットがアドレス255に送信される場合、NATは代わりにそれを受信します。
NATは**最後に**受信したパケットのみを記憶します。
つまり、受信した各パケットのデータは、
NATのパケットメモリを新しいパケットの`X`値と`Y`値で上書きします。

NATはネットワーク上のすべてのコンピュータの監視も行います。
すべてのコンピュータの**着信パケットキューが空**であり、
パケットを送信せずに**パケットを受信しようとし続けている**場合、
ネットワークは**アイドル状態**と見なされます。

ネットワークがアイドル状態になると、NATは**受信した最新のパケットのみ**をアドレス0に送信します。
これによりネットワーク上のコンピュータが活動を再開します。
このようにして、NATは宇宙船が他のエリアで電力を必要とするときにネットワークの電力消費を抑えることができます。

NATによってアドレス0のコンピュータへ放出されたパケットを監視してください。
**NATによってアドレス0のコンピュータへ2回続けて配信される最初の`Y`値は何ですか？**
