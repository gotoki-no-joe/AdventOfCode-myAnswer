# 18日目：多世界解釈 #

海王星に近づくと、惑星のセキュリティシステムがあなたを検出し、
[トリトン](https://ja.wikipedia.org/wiki/%E3%83%88%E3%83%AA%E3%83%88%E3%83%B3_(%E8%A1%9B%E6%98%9F))の
巨大な牽引ビームを作動させます！
着陸する以外に選択肢はありません。

ローカルエリアのスキャンでは、1つの興味深い要点のみが明らかになりました。
それは巨大な地下金庫です。
あなたはトンネルのマップ（パズル入力）を生成しました。
トンネルは狭すぎて斜めには移動できません。

開けた**通路**(`.`)と**石の壁**(`#`)の中に唯一の**入り口**(`@`)があります。
いくつもの**鍵**（小文字で表示）と**扉**（大文字で表示）の組み合わせも検出しました。
ある文字の鍵は同じ文字の扉を開くことができます。
`a`は`A`を開け、`b`は`B`を開けます。
牽引ビームを無力化するために必要な鍵がどれかはわからないため、
**すべての鍵**を収集する必要があります。

たとえば、次のマップがあるとします。

```
#########
#b.A.@.a#
#########
```

入り口(`@`)から出発して、大きな扉(`A`)と鍵(`a`)にのみアクセスできます。
ドアに向かって移動しても役には立ちませんが、
鍵を集めるために2ステップ移動して、その過程で`A`を開錠できます。
（`a`に乗った時点で`A`は消えたと見なす）

```
#########
#b.....@#
#########
```

次に、他の唯一の鍵(`b`)を収集するために6ステップ移動できます：

```
#########
#@......#
#########
```

したがって、すべての鍵を収めるには合計8ステップが必要でした。

より大きな例を次に示します。

```
########################
#f.D.E.e.C.b.A.@.a.B.c.#
######################.#
#d.....................#
########################
```

唯一の合理的な動きは、鍵`a`を取り扉`A`の鍵を解除することです：

```
########################
#f.D.E.e.C.b.....@.B.c.#
######################.#
#d.....................#
########################
```

次に鍵`b`で同じことを行います：

```
########################
#f.D.E.e.C.@.........c.#
######################.#
#d.....................#
########################
```

…そして鍵`c`で同じことをして：

```
########################
#f.D.E.e.............@.#
######################.#
#d.....................#
########################
```

さて、鍵`d`と`e`が選択ができます。
鍵`e`の方が近いですが、今それを集めることは
鍵`d`を先に収集するよりも長い目で見ると遅くなるため、
そちらが最良の選択です。

```
########################
#f...E.e...............#
######################.#
#@.....................#
########################
```

最後に扉`E`を開錠する鍵`e`を収集してから鍵`f`を収集して、総計86ステップかかりました。

以下にいくつか例を示します。

- 最短経路は132ステップ：b, a, c, d, f, e, g
```
########################
#...............b.C.D.f#
#.######################
#.....@.a.B.c.d.A.e.F.g#
########################
```

- 最短経路は136ステップです。
一例は次のとおりです。a, f, b, j, g, n, h, d, l, o, e, p, c, i, k, m

```
#################
#i.G..c...e..H.p#
########.########
#j.A..b...f..D.o#
########@########
#k.E..a...g..B.n#
########.########
#l.F..d...h..C.m#
#################
```

- 最短経路は81ステップです。
一例は次のとおりです。a, c, f, i, d, g, b, e, h

```
########################
#@..............ac.GI.b#
###d#e#f################
###A#B#C################
###g#h#i################
########################
```

**すべての鍵を収集する最短経路は何ステップですか？**
