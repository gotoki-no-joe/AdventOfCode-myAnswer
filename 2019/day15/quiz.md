# 15日目：酸素システム #

このような深宇宙では、色々なことがうまくいかなくなります。
幸いなことに、それらの多くにはインジケータライトがあります。
不幸なことに、これらのライトの1つが点灯しています。
船の一部の酸素システムが故障しています！

情報端末によると、数日前に2番酸素タンクが破裂した後、酸素システムが故障したようです。
酸素レベルが危険なほど低下したため、船のその部分は自動的に密閉されました。
酸素システムを修理するための唯一の選択肢は、遠隔操作の**修理用ドロイド**1台です。

妖精のケアパッケージ（day13で福利厚生パッケージとしたが、適切でなかったようだ）には、
修復ドロイドを遠隔制御するための[Intcode](../day9/quiz.md)プログラム（パズル入力）が含まれていました。
そのプログラムを実行することにより、修理ドロイドを酸素システムに誘導して問題を修正できます。

遠隔制御プログラムは、次のステップをループで無限に実行します。

- 入力命令を介して**移動コマンド**を受理します。
- 移動コマンドを修理ドロイドに送信します。
- 修理ドロイドが移動を完了するまで待ちます。
- 出力命令を介して修理ドロイドの**状態**を報告します。

北 (`1`)、南 (`2`)、西 (`3`)、東 `(4)` の4つの**移動コマンド**のみが理解されます。
その他のコマンドは無効です。
これらは動きの方向は異なりますが、距離は同一です。
充分な長さのある東西の廊下で、
`4,4,4,4,3,3,3,3`という一連のコマンドは
修理ドロイドを元の場所に戻します。

修理ドロイドは、次の**状態**コードのいずれかで返信できます。

- `0`：修理用ドロイドが壁に当たりました。その位置は変更されていません。
- `1`：修理ドロイドは、要求された方向に1ステップ移動しました。
- `2`：修理ドロイドは要求された方向に1ステップ移動しました。その新しい位置は、酸素システムの位置です。

修理ドロイドの周囲については何も知りませんが、
この状態コードを見ることで推定できます。

例として、ドロイドを`D`、壁を`#`、ドロイドが通過できる場所を`.`、
未探索の場所を`_`で表して領域を描画できます。
すると初期状態は次のようになります。

```
______
______
___D__
______
______
```

ドロイドを北に移動させるには`1`を送信します。
`0`で応答した場合、その場所は壁であり、
ドロイドは移動していないことがわかります。

```
______
___#__
___D__
______
______
```

東に移動するには`4`を送信します。
`1`の返信は移動が成功したことを意味します。

```
______
___#__
___.D_
______
______
```

次に例えば北(`1`)、南(`2`)、東(`4`)に移動しようとすると、
すべて`0`の応答が返されます。

```
______
___##_
___.D#
____#_
______
```

今、あなたは修理ドロイドが行き止まりにあることを知っています。
`3`で引き返します。
（この場所は開けていることを既に知っているので、
あなたは`1`の応答があることを既に知っているでしょう。）：

```
______
___##_
___D.#
____#_
______
```

次に、例えば西(`3`)で応答`0`を受け取り、
南(`2`)で応答`1`を受け取り、
再び南(`2`)で応答`0`を受け取り、
次に西(`3`)で応答2を受け取ります。

```
______
___##_
__#..#
__D.#_
___#__
```

ここで、`2`の返信により酸素システムが見つかったことがわかります！
この例では、それは修復ドロイドの開始位置から2離れた場所にありました。

修理用ドロイドを開始位置から酸素システムの位置に移動するために**必要な移動コマンドの数は最小でいくつですか？**

# パート2 #

酸素システムをすばやく修理します。
酸素が徐々にその領域を満たします。

酸素は、修理された酸素システムのある場所から始まります。
既に酸素が広がっている場所に隣接するすべての
開けた場所に酸素が広がるには**1分**かかります。
対角位置は隣接して**いません**。

上記の例で、ドロイドを使用して区画を完全に探索して
次のマップが得られたと仮定します。
（現在酸素のある場所が`O`で印されている）

```
_##___
#..##_
#.#..#
#.O.#_
_###__
```

最初は、酸素のある唯一の場所は、修理された酸素システムの場所です。
しかし、1分後、酸素のある場所に隣接するすべての開けた場所(`.`)に
酸素は広がります。

```
_##___
#..##_
#.#..#
#OOO#_
_###__
```

合計2分後、マップは次のようになります。

```
_##___
#..##_
#O#O.#
#OOO#_
_###__
```

合計3分後：

```
_##___
#O.##_
#O#OO#
#OOO#_
_###__
```

そして最後に、合計4分後に区画全体が酸素で満たされます。

```
_##___
#OO##_
#O#OO#
#OOO#_
_###__
```

したがって、この例では、4分後にすべての場所に酸素が行き渡ります。

修理ドロイドを使用して区画の完全な地図を取得してください。
**酸素で満たすのに何分かかりますか？**
