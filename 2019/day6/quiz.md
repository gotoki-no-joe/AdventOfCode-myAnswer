# 6日目：全天軌道地図 #

水星の全天軌道地図施設に着陸しました。
宇宙での航海には軌道間の転送が含まれることが多いため、
ここの軌道地図は例えばあなたとサンタ間の効率的なルートを見つけるのに役立ちます。
局所的な軌道地図（パズル入力）をダウンロードします。

全天質量中心(universal Center of Mass, COM)を除いて、
宇宙空間内のすべての天体は、ちょうど1つの他の天体の周回軌道にあります。
軌道はおおよそ次のようになります。

```
                  \
                   \
                    |
                    |
AAA--> o            o <--BBB
                    |
                    |
                   /
                  /
```

この図では、天体`BBB`は`AAA`の周回軌道にあります。
`BBB`が`AAA`を周回する経路（線で描画）は一部だけが表示されています。
地図データには、この軌道関係が`AAA)BBB`と記述されます。
これは「`BBB`は`AAA`を周回する軌道上にある」ことを意味します。

地図データを使用して航路をプロットする前に、
データがダウンロード中に破損していないことを確認する必要があります。
マップを検証するために、全天軌道地図施設は**軌道計数チェックサム**を使用しています。
それは**直接軌道**（上記のようなもの）と**間接軌道**の合計数です。

`A`が`B`を周回し、`B`が`C`を周回しているならば、`A`は`C`を**間接的に周回**しています。
この連鎖は、天体の数に制限はありません：
`A`が`B`を周回し、`B`が`C`を周回し、`C`が`D`を周回するならば、`A`は`D`を間接的に周回しています。

例として、次の地図を考える。

```
COM)B
B)C
C)D
D)E
E)F
B)G
G)H
D)I
E)J
J)K
K)L
```

視覚的には、上の軌道地図は次のようになります。

```
        G - H       J - K - L
       /           /
COM - B - C - D - E - F
               \
                I
```

この視覚的表現では、2つの天体が線で接続されているとき、
右側の天体が左側の天体を直接周回します。

ここで、次のように軌道の総数を数えることができます：

- `D`は`C`を直接周回し`B`と`COM`を間接的に周回するので、合計で3軌道になります。
- `L`は`K`を直接周回し`J`,`E`,`D`,`C`,`B`,`COM`を間接的に周回し、合計7軌道です。
- `COM` 何も周回していません。

この例の直接および間接軌道の総数は42です。

あなたの地図データでは**直接および間接軌道の総数はいくつですか？**

# パート2 #

ここで、あなた(`YOU`)がサンタ(`SAN`)に到達するまでに必要な
**軌道転送**の回数を把握する必要があります。

`YOU`が周回している天体から始めます。
目的地は`SAN`が周回している天体です。
軌道転送を使用すると、任意の天体から、その天体が周回している天体、
またはその天体を周回している任意の天体に移動できます。

例えば次の地図があるとします。

```
COM)B
B)C
C)D
D)E
E)F
B)G
G)H
D)I
E)J
J)K
K)L
K)YOU
I)SAN
```

視覚的には、上の軌道地図は次のようになります。

```
                          YOU
                         /
        G - H       J - K - L
       /           /
COM - B - C - D - E - F
               \
                I - SAN
```

この例で`YOU`は`K`はを周回しており、`SAN`は`I`を周回しています。
`K`から`I`に移動するには、最小で4回の軌道転送が必要です。

- `K`から`J`
- `J`から`E`
- `E`から`D`
- `D`から`I`

その後、軌道のマップは次のようになります。

```
        G - H       J - K - L
       /           /
COM - B - C - D - E - F
               \
                I - SAN
                 \
                  YOU
```

`YOU`が周回している天体から`SAN`が周回している天体に移動するために
**必要な軌道転送の最小回数はいくつですか？**
（`YOU`と`SAN`の間ではなく、それらが周回している天体の間です。）
