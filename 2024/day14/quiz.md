# 第14日: トイレの要塞

歴史学者の一人がお手洗いに行きたくなりました。
運よく彼らのリストにある未訪問の場所の近くにトイレがあることを知っていたので、
皆はすぐにイースターバニー本部 (Easter Bunny Headquarters) のロビーにテレポートしました。

残念ながら、EBHQはあなたの最後の[訪問](../../2016/day2/quiz.md)後に
**再び**トイレのセキュリティを「改善」したようです。
トイレの外はロボットであふれています！

トイレに歴史学者を安全に連れて行くためには、ロボットが将来どこにいるかを予測する方法が必要です。
幸いなことに、彼らは全てタイルの床の上を予測可能な**直線**で移動しているようです。

ロボットの現在の**位置** (`p`) と**速度** (`v`) のリストを作成しました（あなたのパズル入力）。
1行につき1台のロボットの情報を記載します。例えば：

```
p=0,4 v=3,-3
p=6,3 v=-1,-3
p=10,3 v=-1,2
p=2,0 v=2,-1
p=0,0 v=1,3
p=3,0 v=-2,-2
p=7,6 v=-1,-3
p=3,0 v=-1,-2
p=9,3 v=2,3
p=7,3 v=-1,2
p=2,4 v=2,-3
p=9,5 v=-3,-3
```

各ロボットの位置は `p=x,y` の形で示され、`x` はロボットが左の壁から何タイル離れているかを、
`y` は上の壁から何タイル離れているかを表します（上から見たとき）。
したがって、`p=0,0` の位置はロボットが左上の隅にいることを意味します。

各ロボットの速度は `v=x,y` の形で与えられ、`x` と `y` は**タイル毎秒**で表されます。
正の `x` はロボットが**右**に移動していることを意味し、
正の `y` はロボットが**下**に移動していることを意味します。
したがって、`v=1,-2` の速度は、ロボットが毎秒1タイル右、2タイル上に移動することを意味します。

実際のトイレの外にいるロボットは、上から見ると幅101タイル、高さ103タイルの空間にいます。
しかしこの例では、ロボットは幅11タイル、高さ7タイルの空間にいます。

ロボットは、互いの上や下を移動するのが得意です（ばね、伸縮可能な脚、クワッドローターの組み合わせによる）、
そのため同じタイルを共有でき、互いに接触しません。
この例について、各タイル上のロボットの数を視覚化すると次のようになります：

```
1.12.......
...........
...........
......11.11
1.1........
.........1.
.......1...
```

これらのロボットには、トイレの最大の安全性のための独特の機能があります：それは**テレポート**できることです。
ロボットが空間の端にぶつかりそうになると、代わりに**反対側にテレポート**し、効果的に端を回り込むことができます。
ロボット `p=2,4 v=2,-3` の最初の数秒間の様子を示します：

```
初期状態:
...........
...........
...........
...........
..1........
...........
...........

1 秒後:
...........
....1......
...........
...........
...........
...........
...........

2 秒後:
...........
...........
...........
...........
...........
......1....
...........

3 秒後:
...........
...........
........1..
...........
...........
...........
...........

4 秒後:
...........
...........
...........
...........
...........
...........
..........1

5 秒後:
...........
...........
...........
.1.........
...........
...........
...........
```

歴史学者はこれ以上待てないので、ロボットを長時間シミュレートする必要はありません。
100秒後、ロボットはどこにいますか？

上の例では、100秒経過した後の各タイルのロボットの数は次のようになります：

```
......2..1.
...........
1..........
.11........
.....1.....
...12......
.1....1....
```

最も安全な地帯を決めるには、100秒後に**それぞれの象限にいるロボットの台数**を数えます。
ちょうど真ん中（水平または垂直）にいるロボットは、どの象限にも含まれないため、関連するロボットは次の通りです：

```
..... 2..1.
..... .....
1.... .....
           
..... .....
...12 .....
.1... 1....
```

この例では、四つの象限にはそれぞれ 1, 3, 4, 1台のロボットが含まれています。
これらを掛け合わせると、総合**安全係数**は12になります。

あなたのリストにあるロボットの動きを、幅101タイル、高さ103タイルの空間内で予測してください。
ちょうど100秒が経過した後の安全係数はいくつですか？

# パート2

トイレ休憩中に、誰かがこれらのロボットが北極で作られ使用されているものと非常に似ていることに気づきます。
もしそれらが同じタイプのロボットであれば、ハードコーディングされたイースターエッグを持っているはずです：
非常にまれに、ほとんどのロボットが並んで**クリスマスツリーの絵**を作るはずです。

ロボットがイースターエッグを表示するために必要な最少の経過秒数はいくつですか？
