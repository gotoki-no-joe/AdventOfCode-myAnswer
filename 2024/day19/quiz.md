# 19日目: リネンの配置

今日は、歴史学者たちが歯車島の[hot sprint](../../2023/day12/quiz.md)に連れて行ってくれます！
非常に怪しいことに、彼らが広大な螺旋のフィールドを慎重に探索し始めても、何もややこしい事が起きません。

隣の**温泉**を訪れるチャンスが**ついに**来たのでしょうか？
確かめる方法は一つだけです。

温泉のフロントデスクのスタッフと短い会話をした後、入場料を支払うための適切なお金を持っていないことがわかります。
しかし、あなたが去る前に、スタッフがあなたの注意を引きます。
どうやら、あなたが温泉で手助けをしたことを聞いていて、取引をする気があるようです：
もし**タオルを整頓する**手伝いをしてくれれば、**無料で**入れてあげると言っています！

この温泉のタオルは全て、**色による縞柄**になっています。
パターンは数種類しかありませんが、そこにあるパターンについては、スタッフが何枚でもそのパターンのタオルを用意してくれます。
縞の色は **白** (w) **青** (u) **黒** (b) **赤** (r) **緑** (g) があります。
したがって、パターン `ggr` のタオルは、緑色の縞、緑色の縞、そして赤色の縞がこの順で配置されています。
（タオルを逆さまにしてパターンを反転させることはできません。そうすると温泉のロゴが逆向きになってしまいます。）

公式温泉ブランディング専門家は、展示したい**デザイン**のリストを作成しました。
それぞれのデザインは縞の色の長い系列です。
使用するタオルは自由ですが、全てのタオルの縞は希望するデザインとぴったり一致しなければなりません。
したがって、デザイン `rgrgr` を展示するには、
2つの `rg` タオルと `r` タオルを使うか、
`rgr` タオルと `gr` タオルを使うこともできます。
また、実際にそのようなタオルパターンが利用可能であれば、単一の巨大な `rgrgr` タオルを使用することもできます。

まず、利用可能な全てのタオルのパターンと希望するデザインのリスト（あなたのパズル入力）を集めます。
例えば：

```
r, wr, b, g, bwu, rb, gb, br

brwrr
bggr
gbbr
rrbgbr
ubwu
bwurrg
brgr
bbrgwb
```

最初の行は利用可能なタオルのパターンを示しています。
この例では、温泉には単一の赤い縞 (`r`) のタオル無限枚、
白い縞と赤い縞 (`wr`) のタオル無限枚、などがあります。

空白の行の後、残りの行は温泉が展示したいデザインをそれぞれ述べています。
この例では、最初のデザイン (`brwrr`) は、
温泉が黒い縞、赤い縞、白い縞、そして2つの赤い縞をこのの順にして展示したいことを意味しています。

利用可能なタオルで、全てのデザインが作れる訳ではありません。
上記の例で、各デザインが可能かどうかは次のとおりです：

- `brwrr` は、`br` タオル、次に `wr` タオル、最後に `r` タオルで作ることができます。
- `bggr` は、`b` タオル、2つの `g` タオル、次に `` rタオルで作ることができます。
- `gbbr` は、`gb` タオルの後に `br` タオルで作ることができます。
- `rrbgbr` は、`r`, `rb`, `g`, `br` で作ることができます。
- `ubwu` は**不可能**です。
- `bwurrg` は、`bwu`, `r`, `r`, `g` で作ることができます。
- `brgr` は、`br`, `g`, `r` で作ることができます。
- `bbrgwb` は**不可能**です。

この例では、8つのデザインのうち6つが利用可能なタオルパターンで作成可能です。

できるだけ早く温泉に入るために、タオルパターンと希望するデザインのリストを注意深く確認してください。
何種類のデザインが作成可能ですか？

# パート2

スタッフは、あなたが考えたタオルの配置のいくつかが少し気に入らないようです。
タオルの再配置の無限ループを避けるために、全ての可能な選択肢を彼らに提供するべきかもしれません。

上記の例のデザインが作成できるさまざまな方法は次のとおりです：

`brwrr` は2つの異なる方法で作成できます：`b`, `r`, `wr`, `r` **または** `br`, `wr`, `r`

`bggr` は `b`, `g`, `g`, `r` でのみ作成できます。

`gbbr` は4つの異なる方法で作成できます：

- `g`, `b`, `b`, `r`
- `g`, `b`, `br`
- `gb`, `b`, `r`
- `gb`, `br`

`rrbgbr` は6つの異なる方法で作成できます：

- `r`, `r`, `b`, `g`, `b`, `r`
- `r`, `r`, `b`, `g`, `br`
- `r`, `r`, `b`, `gb`, `r`
- `r`, `rb`, `g`, `b`, `r`
- `r`, `rb`, `g`, `br`
- `r`, `rb`, `gb`, `r`

`bwurrg` は `bwu`, `r`, `r`, `g` でしか作れません。

`brgr` は2つの異なる方法で作ることができます：`b`, `r`, `g` `r` **または** `br`, `g`, `r`

`ubwu` と `bbrgwb` はやはり不可能です。

この例でタオルを希望のデザインに配置する方法を全て合計すると16 (2 + 1 + 4 + 6 + 1 + 2) になります。

リストができ次第、温泉に入らせて貰えます。
各デザインを作ることができる異なる方法の数を合計するといくつになりますか？
