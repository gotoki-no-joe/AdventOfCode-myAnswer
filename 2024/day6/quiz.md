# 6日目：守衛の闊歩

歴史学者たちがまたも珍妙な[装置](../day4/quiz.md)を使い、
今度は北極試作スーツ製造ラボへ飛ばされてしまいました。それも[1518年](../../2018/day5/quiz.md)の！
歴史に直接アクセスできることは、歴史学者たちにとっては非常に便利だとわかりました。

タイム・パラドックスに気をつけなければならないのは変わらないので、
歴史学者たちが主任を捜している間、1518年の人間を避けることが重要です。
不運なことに、ラボのこの一角には**守衛**が一人巡視しています。

歴史学者たちが安全に捜索できるように、守衛が行く場所を前もって調べておきませんか？

まず、状況の地図（あなたのパズル入力）を作ることから始めます。例えば：

```
....#.....
.........#
..........
..#.......
.......#..
..........
.#..^.....
........#.
#.........
......#...
```

この地図には、守衛の現在の位置が `^` で表示されています。
（地図の視点から見て、守衛は現在**上**を向いていることを文字で示しています。）
木箱、机、錬金術の釜などの**障害物**は `#` で表しています。

1518年のラボの守衛は、以下の手順に繰り返し従うという非常に厳格な巡視プロトコルに従っています：

- 正面の目の前に何かあれば、右に90度曲がる。
- そうでなければ、一歩前進する。

上記の手順に従い、警備員は障害物（この場合は失敗したスーツの試作品の山）に到達するまで何度か上に移動します：

```
....#.....
....^....#
..........
..#.......
.......#..
..........
.#........
........#.
#.........
......#...
```

守衛の眼前に障害物があるため、右を向いてから新しい方向へ直進します：

```
....#.....
........>#
..........
..#.......
.......#..
..........
.#........
........#.
#.........
......#...
```

別の障害物（非常に**長い**化学繊維の糸が何本も巻かれた糸巻き）にさしかかると、
再び右に曲がり、下へと進みます：

```
....#.....
.........#
..........
..#.......
.......#..
..........
.#......v.
........#.
#.........
......#...
```

この手順がしばらく続き、守衛はやがて（万能溶剤のタンクを通り過ぎた後）地図の範囲から外れます：

```
....#.....
.........#
..........
..#.......
.......#..
..........
.#........
........#.
#.........
......#v..
```

守衛の経路を予測することで、ラボ内のどのマスが巡視経路に入っているかを判定できます。
守衛の出発地点を含め、範囲から外れる前に守衛が訪れる位置を`X`で印つけます：

```
....#.....
....XXXXX#
....X...X.
..#.X...X.
..XXXXX#X.
..X.X.X.X.
.#XXXXXXX.
.XXXXXXX#.
#XXXXXXX..
......#X..
```

この例では、守衛は地図上の41のマスを訪れます。

守衛の巡回経路を予測してください。
守衛は、地図上の範囲から外れるまでに、いくつのマスを訪れるでしょうか？

# パート2

歴史学者たちが守衛の巡視経路を避けはじめたとき、あなたは彼らの珍妙な装置を借りて研究室の外に出ました。
安全な貯蔵庫の中から、直近の過去数ヶ月をタイムトラベルし、
毎晩の研究所の守衛の巡回区域の状況を倉庫の壁に[記録](../../2018/day4/quiz.md)しました。

さっきのほんの数秒後の時点へ戻ると、歴史学者たちが、
守衛の巡回区域が広すぎて、捕まることなく安全にラボを捜索することができないと説明しました。

幸いなことに、新たな障害物をひとつ加えるだけでは、タイムパラドックスを引き起こすことは**ない**と彼らは**確信して**います。
新しい障害物を、守衛が**ループにはまり込んでしまう**形で配置し、
ラボの残りの部分を安全に捜索できるようにしたいと考えています。

タイムパラドックスを引き起こす可能性を最も低くするために、
歴史学者たちはそのような障害物の可能な位置を**全て**知りたいと考えています。

新しい障害物は守衛の出発地点には置けません。
守衛は今そこにいて、気づいてしまうでしょう。

上の例では、新しい障害物があると守衛がループにはまり込んでしまう位置は**6つ**だけあります。
これらの6つの状況の図は、`O` で新しい障害物、`|` で守衛が上下に動く位置、
`-` で守衛が左右に動く位置、`+` で守衛が上下左右両方に動く位置を示しています。

候補1、守衛の出発地点の横に印刷機を置く：

```
....#.....
....+---+#
....|...|.
..#.|...|.
....|..#|.
....|...|.
.#.O^---+.
........#.
#.........
......#...
```

候補2、失敗したスーツのプロトタイプの山を地図領域の右下の象限に置く：

```
....#.....
....+---+#
....|...|.
..#.|...|.
..+-+-+#|.
..|.|.|.|.
.#+-^-+-+.
......O.#.
#.........
......#...
```

候補3、右下の象限にある立ち机の横に、煙突絞り構造の試作品の木箱を置く：

```
....#.....
....+---+#
....|...|.
..#.|...|.
..+-+-+#|.
..|.|.|.|.
.#+-^-+-+.
.+----+O#.
#+----+...
......#...
```

候補4、左下隅に錬金術の[無限エネルギー装置](https://retroencabulator.com/) (retroencabulator 過去にも言及されている)を置く：

```
....#.....
....+---+#
....|...|.
..#.|...|.
..+-+-+#|.
..|.|.|.|.
.#+-^-+-+.
..|...|.#.
#O+---+...
......#...
```

候補5：錬金術無限エネルギー装置をもう少し右に置く：

```
....#.....
....+---+#
....|...|.
..#.|...|.
..+-+-+#|.
..|.|.|.|.
.#+-^-+-+.
....|.|.#.
#..O+-+...
......#...
```

Option six, put a tank of sovereign glue right next to the tank of universal solvent:

候補6、万能溶剤のタンクのすぐ隣に[ソベリン・グルー](https://www.dndbeyond.com/magic-items/4756-sovereign-glue) ([強力接着剤](https://wikiwiki.jp/classicdnd/%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E9%AD%94%E6%B3%95%E3%81%AE%E3%82%A2%E3%82%A4%E3%83%86%E3%83%A0/%E3%80%90%E3%82%BD%E3%83%B4%E3%83%AA%E3%83%B3%E3%83%BB%E3%82%B0%E3%83%AB%E3%83%BC%E3%80%91))のタンクを置く：

```
....#.....
....+---+#
....|...|.
..#.|...|.
..+-+-+#|.
..|.|.|.|.
.#+-^-+-+.
.+----++#.
#+----++..
......#O..
```

守衛に気づかれずに、あなたと歴史学者たちが障害物を設置することができるならば、
何を障害物として選ぶかは特に意味はありません。
重要なのは、タイムパラドックスを最小にするものを見つけられるだけの選択肢を持つことで、
この例では6つの異なる位置を選ぶことができます。

新しい障害物をひとつだけ加えることで、守衛をループにはまり込ませる必要があります。
この障害物を置く位置の選択肢はいくつありますか？
