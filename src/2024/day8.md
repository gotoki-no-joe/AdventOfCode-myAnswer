# 第8日: 同一直線上での共鳴
<!-- Resonant Collinearity 共鳴する共線性 Kagi translate すごいな -->

あなたは、極秘のイースターバニー施設の[屋上](../2016/day25.md)に出ました。

歴史学者たちが自分の仕事をしている間、あなたはおなじみの**巨大アンテナ**を見てみます。
驚くべきことにそれは、人々がクリスマスギフトとして
イースターバニー印のパチもん二流チョコレートを購入する可能性を0.1%高める信号を
発信するように再調整されているようです！考えられない！

都市をスキャンすると、実際にそのようなアンテナがたくさんあることがわかりました。
各アンテナは、単一の小文字アルファベット、大文字アルファベット、または数字で示される特定の**周波数**に設定されています。
あなたはこれらのアンテナの地図（あなたのパズル入力）を作成しました。例えば：

```
............
........0...
.....0......
.......0....
....0.......
......A.....
............
............
........A...
.........A..
............
............
```

信号は、アンテナの共振周波数に基づいて特定の**波腹**でのみその悪影響を及ぼします。
（補足：antinode n. 【物理】 波腹《二つの波節 （node） の中間部》[株式会社研究社 新英和大辞典第6版]
ただしこの問題の内容は物理現象とはあまり関係がない。）
特に、波腹は、同じ周波数の2つのアンテナと完全に一直線上にある任意の点で発生しますが、
片方のアンテナがもう片方のアンテナの2倍の距離にあるときに限ります。
これは、同じ周波数の任意のペアのアンテナに対して、2つの波腹がそれぞれの側に1つずつ存在することを意味します。

したがって、周波数 `a` のこれら2つのアンテナは、 `#` で示す2つの波腹を生成します。

```
..........
...#......
..........
....a.....
..........
.....a....
..........
......#...
..........
..........
```

同じ周波数の第3のアンテナを追加すると、さらにいくつかの波腹が生成されます。
理論上は波腹が4つ増えるはずですが、2つは地図の右側から外れているため、2つだけが追加されます：

```
..........
...#......
#.........
....a.....
........a.
.....a....
..#.......
......#...
..........
..........
```

異なる周波数のアンテナ対は波腹を生成しません。
`A` と`a` は異なる周波数と解釈します。
ただし、アンテナが存在する場所に波腹が発生することは**あります**。
下の図では、唯一の周波数大文字 `A` のアンテナは波腹を生成しませんが、
その位置には周波数小文字 `a` の波腹があります。

```
..........
...#......
#.........
....a.....
........a.
.....a....
..#.......
......A...
..........
..........
```

最初の例では、2つの異なる周波数を持つアンテナがあるため、
それらが作る波腹は次のように見えます。
加えて、最上部の周波数 `A` のアンテナと重なる波腹があります。

```
......#....#
...#....0...
....#0....#.
..#....0....
....0....#..
.#....A.....
...#........
#......#....
........A...
.........A..
..........#.
..........#.
```

最上部の周波数 `A` のアンテナが周波数 `0` の波腹と重なるため、
地図の範囲内で波腹の発生する位置は合計14か所になります。

信号の影響を計算してください。
地図の範囲内で波腹の発生する位置はいくつありますか？

# パート2

作業を肩越しに見守っていた歴史学者の一人が、倍音共鳴の影響を計算に入れたかと尋ねました。

てへっ！

モデルを更新したところ、波腹は、同じ周波数の少なくとも2つのアンテナと完全に一直線上にある**任意の格子点**に、
距離は関係なしに発生することがわかりました。
これは、新しい波腹のいくつかが各アンテナの位置で発生することを意味します
（そのアンテナがその周波数の唯一のものでない限り）。

したがって、下図の周波数 `T` の3つのアンテナは現在、多くの波腹を生成します：

```
T....#....
...T......
.T....#...
.........#
..#.......
..........
...#......
..........
....#.....
..........
```

実際には、3つの周波数 `T` のアンテナ（自身の位置）は全て、
2つのアンテナと正確に一直線上にあるため、そこまた全て波腹です！
これにより、上記の例の波腹の総数は9個になります。

元の例には、全てのアンテナに現れるものを含めて、現在34の波腹があります：

```
##....#....#
.#.#....0...
..#.#0....#.
..##...0....
....0....#..
.#...#A....#
...#..#.....
#....#.#....
..#.....A...
....#....A..
.#........#.
...#......##
```

更新されたモデルを使用して信号の影響を計算してください。
地図の範囲内で波腹の発生する位置はいくつありますか？
