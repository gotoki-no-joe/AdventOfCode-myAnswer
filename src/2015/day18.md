# 18日目：あなたの庭のGIFアニメ

100万灯ライト事件の後、防火条例がより厳しくなりました。
今では許されるのは1万本までのライトです。
あなたはそれを \\(100 \times 100\\) の碁盤状に並べました。

あなたを失望させることは絶対にありません、
サンタは今回も理想的な照明の構成の手順をメールであなたに送りました。
それほど少ない数のライトでは、彼の言うには、
**アニメーション**の力を借りる必要があるとのことです。

同封した初期状態（あなたのパズル入力）にライトを構成して始めます。
`#`は点灯、`.`は消灯を表します。

そして、ステップであなたのグリッドをアニメーションさせてください。
各ステップでは現在の構成に基づいて次の構成を決定します。
それぞれのライトの次の状態（点灯または消灯）は
その現在の状態とそれに隣接（斜めも含む）する8個のライトの
現在の状態に依存しています。
グリッドの縁にあるライトは隣人が8より少ないですが、欠けている部分は常に消灯として数えます。

例えば、下の単純化した6x6のグリッドで、
`A`と印したライトは1から8の隣人を持ちますが、
`B`と印したライトは縁にあるので、1から5の隣人しかありません。

~~~
1B5...
234...
......
..123.
..8A4.
..765.
~~~

ライトの次の状態は現在の状態（点灯または消灯）と
**点灯している隣人の数**に基づいて決まります。

- **点灯**しているライトは
点灯している隣人が2または3であるとき点灯を続け、
さもなくば消灯します。
- **消灯**しているライトは
点灯している隣人がちょうど3のとき点灯し、
さもなくば消灯し続けます。

すべてのライトは同時に更新されます。
ライトはみな同じ現在の状態で考えて次の状態に動きます。

6x6グリッドの構成例での動作ステップを示します。

初期状態：
~~~
.#.#.#
...##.
#....#
..#...
#.#..#
####..
~~~

1ステップ後：
~~~
..##..
..##.#
...##.
......
#.....
#.##..
~~~
2ステップ後：
~~~
..###.
......
..###.
......
.#....
.#....
~~~

3ステップ後：
~~~
...#..
......
...#..
..##..
......
......
~~~

4ステップ後：
~~~
......
......
..##..
..##..
......
......
~~~
4ステップ後、この例は4つのライトが点灯しています。

あなたの100x100のライトで、与えられた初期構成で、
**100ステップ後にはいくつのライトが点灯していますか？**

<details><summary>解説</summary><div>

せっかくなので、どんなイルミネーションになるのか鑑賞しながら100ステップ進めるプログラムを作りましょう。

</div></details>

# パート2

あなたは手順書をペラっとめくりました。
サンタからのメッセージの続きに、これは単にConwayのライフゲームの実装に過ぎないという指摘がありました。
少なくとも、購入したライトのグリッドに問題があることに気づくまでは。
4つの角に1つずつあるライトが**点灯しっぱなし**で消灯できません。
上記の例は、実際には次のようになります。

初期状態：
~~~
##.#.#
...##.
#....#
..#...
#.#..#
####.#
~~~
1ステップ後：
~~~
#.##.#
####.#
...##.
......
#...#.
#.####
~~~

2ステップ後：
~~~
#..#.#
#....#
.#.##.
...##.
.#..##
##.###
~~~

3ステップ後：
~~~
#...##
####.#
..##.#
......
##....
####.#
~~~

4ステップ後：
~~~
#.####
#....#
...#..
.##...
#.....
#.#..#
~~~

5ステップ後：
~~~
##.###
.##..#
.##...
.##...
#.#...
##...#
~~~

5ステップ後、この例では17ライトが点灯しています。

あなたの100x100のライトで、与えられた初期構成で、
ただし角の4つのライトは常に**点灯**しているとき、
**100ステップ後にはいくつのライトが点灯していますか？**
