# 18日目：ローグライク

この部屋に入った途端、カチッという大きな音がしました！
ここの床のタイルのいくつかは罠の感圧板で、
今あなたが発動させた罠は…とにかく罠が何かをあなたにしようとしたものが弾切れだったようです。
次もこんな幸運があるかどうかは疑わしいです。

よく調べてみると、この部屋の罠と安全なタイルはパターンに従っているようです。
タイルはすべて同じ幅の行に配置されています。
あなたは最初の行の安全なタイル（`.`）とトラップ（`^`）を書き留めました。（パズル入力）
(訳注：これはrogueの床と罠の記号)

各行のタイルの種類（罠または床）は、前の行の同じ位置、およびその位置の両側にあるタイルの種類に基づいています。
（どちらかの側が列のいずれかの端から外れている場合、壁にはトラップが埋め込まれていないため、「安全」と見なします。）

たとえば、最初の行（アルファベットで示したタイル）を知っていて、
次の行（数字で示したタイル）を判別したいとします。

~~~
ABCDE
12345
~~~

タイル`2`の種類は、タイル`A`,`B`,`C`の種類に基づいています。
タイル`5`の種類は、タイル`D`,`E`および仮想の「安全な」タイルに基づいています。
前の行のこれら3つのタイルを、それぞれ**左、中央、右**のタイルと呼びましょう。
すると、新しいタイルは、次のいずれかの状況でのみ罠になります。

- 左と中央のタイルは罠で、右のタイルはそうではない場合。
- 中央と右のタイルは罠で、左のタイルはそうではない場合。
- 左のタイルだけが罠の場合。
- 右のタイルだけが罠の場合。

その他の状況では、新しいタイルは安全です。

行`..^^.`から始めて、これらのルールを新しい各タイルに適用することにより、次の行を決定できます。

- 次の行の左端の文字は、前の行の左（存在しないため「安全」と見なします）、中央（最初の`.`、「安全」を意味します）、および右（2番目の`.`、これも「安全」）のタイルを考えます。すべての罠の規則は、前の3つのタイルの少なくとも1つに罠を必要とするため、この新しい行の最初のタイルも安全`.`です。
- 次の行の2番目の文字は、前の行の左（.）、中央（.）、および右（^）のタイルを考えます。これは4番目のルールと一致します。右側のタイルのみが罠です。したがって、この新しい行の次のタイルは罠`^`です。
- 3番目の文字は`.^^`を考えます。これは2番目の罠の規則に一致します。中央と右のタイルは罠ですが、左のタイルは罠ではありません。したがって、このタイルもまた罠`^`です。
- この新しい行の最後の2文字は、それぞれ1番目と3番目のルールに一致するため、どちらも罠`^`です。

これらの手順を実行すると、部屋のタイルの次の行が`.^^^^`であるとわかります。
次に、同じルールを使用して次の行に進み、`^^..^`を取ます。
2つの新しい行を決定すると、マップは次のようになります。

~~~
..^^.
.^^^^
^^..^
~~~

1行あたり10タイル、10行の大きな例を示します。

~~~
.^^.^.^^^^
^^^...^..^
^.^^.^.^^.
..^^...^^^
.^^^^.^^.^
^^..^.^^..
^^^^..^^^.
^..^^^^.^^
.^^^..^.^^
^^.^^^..^^
~~~

10行で、この大きな例には38の安全なタイルがあります。

パズル入力のマップから始めて、合計40行（開始行を含む）で、安全なタイルはいくつありますか？

# パート2

合計400000行に安全なタイルはいくつありますか？
