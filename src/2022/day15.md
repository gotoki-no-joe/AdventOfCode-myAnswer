# 15 日目: ビーコン除外領域

あなたが遭難信号に導かれて地下トンネルの広大な迷宮に足を踏み入れたとき、再び地面が鳴り響くのを感じます。
それらを全て調べる時間はありませんが、調べる必要もありません。
あなたのリュックには、
元は行方不明になった小人を見つけるために作られたらしい、
散開させることができる**センサー**のセットが入っています。

センサーはそれほど強力ではありませんが、問題ありません。
あなたの携帯機器は、遭難信号の発信源に十分に、
センサーシステムが有効な距離まで近づいていることを示しています。
リュックから緊急センサーシステムを取り出し、上部にある大きなボタンを押すと、
センサー群がトンネル内各所へ高速に展開されます。

センサーは、適切な読み取りができると思われる地点を見つけると、
固い表面に自身を固定し、最も近い信号源**ビーコン**の監視を開始します。
センサーとビーコンは常に整数座標に存在します。
各センサーは自分の位置を認識しており、**ビーコンの位置を正確に特定**できます。
ただし、センサーは、マンハッタン距離[pedia]で測って
**センサーに最も近い**ビーコンひとつにしかロックオンできません。
（2つのビーコンからセンサーまでの距離が同じになることはありません。）

センサーが自身の位置と最も近いビーコンを報告するのにそれほど時間はかかりません。
（パズルの入力）
例えば：

```
Sensor at x=2, y=18: closest beacon is at x=-2, y=15
Sensor at x=9, y=16: closest beacon is at x=10, y=16
Sensor at x=13, y=2: closest beacon is at x=15, y=3
Sensor at x=12, y=14: closest beacon is at x=10, y=16
Sensor at x=10, y=20: closest beacon is at x=10, y=16
Sensor at x=14, y=17: closest beacon is at x=10, y=16
Sensor at x=8, y=7: closest beacon is at x=2, y=10
Sensor at x=2, y=0: closest beacon is at x=2, y=10
Sensor at x=0, y=11: closest beacon is at x=2, y=10
Sensor at x=20, y=14: closest beacon is at x=25, y=17
Sensor at x=17, y=20: closest beacon is at x=21, y=22
Sensor at x=16, y=7: closest beacon is at x=15, y=3
Sensor at x=14, y=3: closest beacon is at x=15, y=3
Sensor at x=20, y=1: closest beacon is at x=15, y=3
```

さて、位置`2,18`のセンサーを考えてみましょう。
それに最も近いビーコンは`-2,15`にあります。
`9,16`にあるのセンサーに対して、それに最も近いビーコンは`10,16`にあります。

センサーを`S`、ビーコンを`B`として描画すると、
上記のセンサーとビーコンの配置は次のようになります。

```
               1    1    2    2
     0    5    0    5    0    5
 0 ....S.......................
 1 ......................S.....
 2 ...............S............
 3 ................SB..........
 4 ............................
 5 ............................
 6 ............................
 7 ..........S.......S.........
 8 ............................
 9 ............................
10 ....B.......................
11 ..S.........................
12 ............................
13 ............................
14 ..............S.......S.....
15 B...........................
16 ...........SB...............
17 ................S..........B
18 ....S.......................
19 ............................
20 ............S......S........
21 ............................
22 .......................B....
```

ただし、これは必ずしもエリア内のすべてのビーコンの包括的なマップではありません. 各センサーは最も近いビーコンのみを識別するため、センサーがビーコンを検出した場合、そのセンサーの近くまたは近くに他のビーコンがないことがわかります。たまたまセンサーに最も近いビーコンではないビーコンがまだ存在する可能性があります。のセンサーを考えてみましょう8,7:

               1    1    2    2
     0    5    0    5    0    5
-2 ..........#.................
-1 .........###................
 0 ....S...#####...............
 1 .......#######........S.....
 2 ......#########S............
 3 .....###########SB..........
 4 ....#############...........
 5 ...###############..........
 6 ..#################.........
 7 .#########S#######S#........
 8 ..#################.........
 9 ...###############..........
10 ....B############...........
11 ..S..###########............
12 ......#########.............
13 .......#######..............
14 ........#####.S.......S.....
15 B........###................
16 ..........#SB...............
17 ................S..........B
18 ....S.......................
19 ............................
20 ............S......S........
21 ............................
22 .......................B....
このセンサーの最も近いビーコンは に2,10あるため、近くまたは近くにあるビーコンがないことがわかります ( とマークされた位置には#)。

検出されたビーコンはいずれも遭難信号を生成していないようです。そのため、遭難ビーコンがどこにあるかを調べる必要があります。ここでは、ビーコンが 1 つの列に沿って配置できない可能性のある位置を数えることで、物事を単純に保ちます。

したがって、上記の例のようなビーコンとセンサーの配置があり、 の行でy=10、ビーコンが存在できない可能性のある位置の数を数えたいとします。その行の近くにあるすべてのセンサーからのカバレッジは次のようになります。

                 1    1    2    2
       0    5    0    5    0    5
 9 ...#########################...
10 ..####B######################..
11 .###S#############.###########.
この例では、 の行にy=10、26ビーコンが存在できない位置があります。

デプロイしたばかりのセンサーからのレポートを参照してください。の行でy=2000000、ビーコンを含むことができない位置はいくつありますか?

あなたのパズルの答えは でした5181556。

- - パート2 - -
ハンドヘルド デバイスは、付近のビーコンから遭難信号が発信されていることを示しています。遭難ビーコンはどのセンサーによっても検出されませんが、遭難ビーコンの座標はそれぞれより大きくなく、より小さくなければxなりません。y04000000

遭難ビーコンの信号を分離するには、同調周波数を決定する必要があります。これは、そのx座標にを掛けてから、その座標4000000を加算することによって見つけることができますy。

上記の例では、探索空間は小さくなっています。代わりに、xとのy座標はそれぞれ最大20です。この縮小された検索エリアでは、ビーコンを持つことができる位置は 1 つだけですx=14, y=11。この遭難信号の同調周波数は です56000011。

遭難ビーコンの唯一の可能な位置を見つけます。同調周波数は？

あなたのパズルの答えは でした12817603219131。

このパズルの両方の部分が完成しました! それらは 2 つの金の星を提供します: **

この時点で、アドベント カレンダーに戻り、別のパズルに挑戦してください。

それでも見たい場合は、パズルの入力を取得できます。

[共有することもできます】このパズル。