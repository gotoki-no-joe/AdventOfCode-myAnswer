コードの出現[約]【イベント】[店][設定][ログアウト]ごとときのじょうえ14*
   サブy{2022年}[カレンダー]【AoC++】【協賛】【リーダーボード】【統計】
私たちのスポンサーは、アドベント オブ コードの実現を支援しています。
Ximedes - クラウドの Kotlin からターミナルの NodeJS まで、当社のソフトウェアは世界中の支払いと公共交通機関の発券を可能にします。
--- 7 日目: デバイスに空き容量がありません ---
遠征が進むにつれて、鳥のさえずりや雨滴が葉に当たる音が聞こえます。時折、遠くでもっと大きな音が聞こえることさえあります。とにかく、動物はどれくらいの大きさでここに出ますか？

エルフがあなたにくれたデバイスには、通信システム以外にも問題があります。システム アップデートを実行しようとすると、次のようになります。

$ system-update --please --pretty-please-with-sugar-on-top
Error: No space left on device
おそらく、いくつかのファイルを削除して、更新用のスペースを作ることができますか?

ファイルシステムを参照して状況を評価し、結果の端末出力 (パズルの入力) を保存します。例えば：

$ cd /
$ ls
dir a
14848514 b.txt
8504156 c.dat
dir d
$ cd a
$ ls
dir e
29116 f
2557 g
62596 h.lst
$ cd e
$ ls
584 i
$ cd ..
$ cd ..
$ cd d
$ ls
4060174 j
8033020 d.log
5626152 d.ext
7214296 k
ファイルシステムは、ファイル (プレーンデータ) とディレクトリ (他のディレクトリまたはファイルを含むことができる) のツリーで構成されます。一番外側のディレクトリは と呼ばれ/ます。ファイルシステムをナビゲートし、ディレクトリに出入りして、現在いるディレクトリの内容を一覧表示できます。

端末出力内で、 で始まる行$は実行したコマンドであり、一部の最新のコンピューターと非常によく似ています。

cdはディレクトリの変更を意味します。これにより、現在のディレクトリが変更されますが、具体的な結果は引数によって異なります。
cd x1 つのレベルで移動しxます。現在のディレクトリで指定されたディレクトリを探し、それを現在のディレクトリにします。
cd ..1 レベル移動します。現在のディレクトリを含むディレクトリを見つけ、そのディレクトリを現在のディレクトリにします。
cd /現在のディレクトリを最も外側のディレクトリ に切り替えます/。
lsリストを意味します。現在のディレクトリに直接含まれるすべてのファイルとディレクトリを出力します。
123 abcは、現在のディレクトリにabcsizeという名前のファイルが含まれていることを意味します123。
dir xyzは、現在のディレクトリに という名前のディレクトリが含まれていることを意味しxyzます。
上記の例のコマンドと出力から、ファイルシステムが視覚的に次のようになっていることがわかります。

- / (dir)
  - a (dir)
    - e (dir)
      - i (file, size=584)
    - f (file, size=29116)
    - g (file, size=2557)
    - h.lst (file, size=62596)
  - b.txt (file, size=14848514)
  - c.dat (file, size=8504156)
  - d (dir)
    - j (file, size=4060174)
    - d.log (file, size=8033020)
    - d.ext (file, size=5626152)
    - k (file, size=7214296)
ここでは、/(最外部のディレクトリ)aとd( にある/)とe(にある) の 4 つのディレクトリがありaます。これらのディレクトリには、さまざまなサイズのファイルも含まれています。

ディスクがいっぱいなので、おそらく最初のステップは、削除するのに適したディレクトリを見つけることです。これを行うには、各ディレクトリの合計サイズを決定する必要があります。ディレクトリの合計サイズは、直接的または間接的に含まれるファイルのサイズの合計です。(ディレクトリ自体は、固有のサイズを持っているとは見なされません。)

上記のディレクトリの合計サイズは次のようになります。

ディレクトリの合計サイズeは584です。これは、サイズが 584 のファイルiが 1 つ含まれており、他のディレクトリがないためです。
ディレクトリには、ファイル(サイズ 29116)、(サイズ 2557)、および(サイズ 62596)が含まれているため、a合計サイズは94853です。fgh.lstiaei
ディレクトリdの合計サイズは24933642です。
最も外側のディレクトリとして、/すべてのファイルが含まれます。その合計サイズは48381165で、すべてのファイルのサイズの合計です。
まず、合計サイズが最大 100000のディレクトリをすべて見つけてから、それらの合計サイズの合計を計算します。上記の例では、これらのディレクトリはaとeです。それらの合計サイズの合計は95437(94853 + 584) です。(この例のように、このプロセスはファイルを複数回カウントできます!)

合計サイズが最大 100000 のすべてのディレクトリを検索します。これらのディレクトリの合計サイズの合計は?

あなたのパズルの答えは でした1367870。

- - パート2 - -
これで、削除するディレクトリを選択する準備が整いました。

ファイルシステムで利用できる合計ディスク容量は です70000000。更新を実行するには、少なくとも の未使用容量が必要です30000000。更新を実行するのに十分なスペースを解放する、削除できるディレクトリを見つける必要があります。

上記の例では、最も外側のディレクトリの合計サイズ (したがって、使用済み領域の合計量) は48381165です。これは、未使用スペースのサイズが現在 である必要があることを意味しますが、これは更新で必要とされる21618835ものではありません。30000000したがって、更新を実行するには、少なくとも合計サイズが のディレクトリを8381165削除する必要があります。

これを実現するには、次のオプションがあります。

ディレクトリを削除eすると、未使用領域が だけ増え584ます。
ディレクトリを削除aすると、未使用領域が だけ増え94853ます。
ディレクトリを削除dすると、未使用領域が だけ増え24933642ます。
ディレクトリを削除/すると、未使用領域が だけ増え48381165ます。
ディレクトリeとディレクトリaはどちらも小さすぎます。それらを削除しても、十分なスペースが解放されません。ただし、ディレクトリdとディレクトリ/はどちらも十分に大きいです。これらの中から、最小の:を選択し、d未使用スペースを だけ増やし24933642ます。

削除した場合にファイルシステム上で更新を実行するのに十分なスペースを解放する最小のディレクトリを見つけます。そのディレクトリの合計サイズは?

あなたのパズルの答えは でした549173。

このパズルの両方の部分が完成しました! それらは 2 つの金の星を提供します: **

この時点で、アドベント カレンダーに戻り、別のパズルに挑戦してください。

それでも見たい場合は、パズルの入力を取得できます。

[共有することもできます】このパズル。
