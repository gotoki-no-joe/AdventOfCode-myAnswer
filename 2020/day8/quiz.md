# 8日目：ハンドヘルドハングアップ #

主要なハブ空港へのフライトは問題なく巡航高度に到達しました。
小さな傘が付いている飲み物の機内メニューを眺めていると、あなたの隣に座っている子供たちが声をかけてきました。

彼らの携帯ゲーム機がオンになりません！
彼らはあなたに見てほしいと言います。

問題を、ゲーム機のブートコード（パズル入力）の奇妙な**無限ループ**に絞り込みました。
修正はできると思いますが、まずはコードを隔離して実行できる必要があります。

ブートコードは、テキストファイルとして行ごとに1つの**命令**を持つテキストで表されます。
各命令は**命令語(operation)**（`acc`, `jmp`, `nop`）と**引数**（通常はオペランド、`+4`や`-20`といった符号付き数値）からなります。

- `acc`は**アキュムレータ**と呼ばれる単一のグローバル値を、引数で指定された値だけ増減します。
たとえば`acc +7`はアキュムレータを7増やします。
アキュムレータは0で始まります。
`acc`命令の後、そのすぐ下の命令が次に実行されます。
- `jmp`はその命令から相対的に新しい命令に**ジャンプ**します。
次に実行する命令は、引数をこの`jmp`命令からの**オフセット**として使用して見つけられます。
たとえば、`jmp +2`は次の命令をスキップし、`jmp +1`はすぐ下の命令に進み、
`jmp -20`は20行上の命令を次に実行します。
- `nop`は**No OPeration**の略です。これは何もしません。
次に、そのすぐ下の命令が実行されます。

たとえば、次のプログラムについて考えてみます。

~~~
nop +0
acc +1
jmp +4
acc +3
jmp -3
acc -99
acc +1
jmp -4
acc +6
~~~

これらの命令は、次の順序でアクセスされます。

~~~
nop +0  | 1
acc +1  | 2, 8(!)
jmp +4  | 3
acc +3  | 6
jmp -3  | 7
acc -99 |
acc +1  | 4
jmp -4  | 5
acc +6  |
~~~

まず`nop +0`は何もしません。
次にアキュムレータが0から1に増加し（acc +1）、
`jmp +4`が次の命令を最後の方にあるもう一つの`acc +1`に設定します。
これがアキュムレータを1から2に増やした後、
`jmp -4`が行なわれ、次の命令を唯一の`acc +3`に設定します。
これかアキュムレータを5にし、`jmp -3`がプログラムを最初の`acc +1`に戻します。

これは**無限ループ**です。この一連のジャンプにより、プログラムは永久に実行されます。
プログラムがいずれかの命令を二回目に実行しようとした瞬間、
プログラムが終了することはないことがわかります。

プログラムが命令を2回目に実行する**直前**の、アキュムレータの値は5です。

あなたのブートコードのコピーを実行します。
いずれかの命令が2回実行される直前に、**どのような値がアキュムレータにありますか？**

# パート2 #

慎重に分析した結果、**ちょうど1つの命令だけが破損している**とあなたは確信しました。

プログラム中のどこかで、`jmp`が本当は`nop`であるか、
あるいは`nop`が本当は`jmp`であるかの**いずれか**です。
（このブートコードの破損において`acc`命令は壊れることはありませんでした。）

プログラムは、**ファイル中の最後の命令の直後の命令を実行しようとする**ことで終了することになっています。
ちょうど1つだけ`jmp`または`nop`を変更することで、ブートコードを修復し、正しく終了するようにできます。

たとえば、上記の同じプログラムについて考えてみます。

~~~
nop +0
acc +1
jmp +4
acc +3
jmp -3
acc -99
acc +1
jmp -4
acc +6
~~~

最初の命令を`nop +0`から`jmp +0`に変更すると、単一命令の無限ループが作成され、その命令を離れることはありません。
ほとんどの`jmp`命令はどれを変更しても、プログラムは最終的に別の`jmp`命令を見つけて永久にループします。

しかし、最後から2番目の命令を変更した場合（`jmp -4`を`nop -4`に）、プログラムは終了します！
命令は次の順序でアクセスされます。

~~~
nop +0  | 1
acc +1  | 2
jmp +4  | 3
acc +3  |
jmp -3  |
acc -99 |
acc +1  | 4
nop -4  | 5
acc +6  | 6
~~~

最後の命令（`acc +6`）の後、プログラムはファイル中の最後の命令の次の命令を実行しようとして終了します。
この変更によりプログラムが終了した後、アキュムレータは値8を保持しています。（`acc +1`, `acc +1`, `acc +6`）

1つだけ`jmp`を（`nop`に）または`nop`を（`jmp`に）変更して、
正常に終了するようにプログラムを修正してください。
**プログラム終了後のアキュムレータの値はいくつですか？**
