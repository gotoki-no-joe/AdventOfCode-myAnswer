# 4日目：パスポート処理 #

パスポートと間違えて北極大使信任状を持ってきたことに気付いたのは、空港に到着したときのことでした。
これらの文書は非常に似ていますが、北極大使信任状は国から発行されたものではないため、
実際には世界のほとんどの旅行に有効な文書ではありません。

ただ、問題を抱えているのはあなただけではないようです。
自動パスポートスキャナに非常に長い行列ができており、
遅延により旅行日程が狂う可能性があります。

何らかの疑わしいネットワークセキュリティのために、
あなたは自分がこれらの問題の両方を同時に解決できるかもしれないことに気づきます。
(セキュリティが怪しいからシステムが覗けたってこと？)

自動パスポートスキャナは、**どのパスポートがすべての必須フィールドを持つかを検出する**ことに問題を抱えているために低速です。
期待されるフィールドは次のとおりです。

- byr （Birth Year, 生年）
- iyr （Issue Year, 発行年）
- eyr （Expiration Year, 有効期限）
- hgt （Height, 身長）
- hcl （Hair Color, 髪の色）
- ecl （Eye Color, 目の色）
- pid （Passport ID, パスポートID）
- cid （Country ID, 国ID）

パスポートデータはバッチファイル（パズル入力）で検証されます。
各パスポートは空白文字または改行で区切られたキー:値ペアの列として表されます。
パスポートは空行で区切られています。

4つのパスポートを含むバッチファイルの例を次に示します。

~~~
ecl:gry pid:860033327 eyr:2020 hcl:#fffffd
byr:1937 iyr:2017 cid:147 hgt:183cm

iyr:2013 ecl:amb cid:350 eyr:2023 pid:028048884
hcl:#cfa07d byr:1929

hcl:#ae17e1 iyr:2013
eyr:2024
ecl:brn pid:760753108 byr:1931
hgt:179cm

hcl:#cfa07d eyr:2025 pid:166559648
iyr:2011 ecl:brn hgt:59in
~~~

最初のパスポートは**有効**です。8つのフィールドすべてが存在します。
2番目のパスポートは**無効**です。`hgt`（身長フィールド）が欠落しています。

3番目のパスポートは興味深いものです。
**唯一欠けているフィールド**は`cid`で、そのため北極大使信任状からのデータのようです。
それは全然パスポートではありません！
欠落している`cid`フィールドを一時的に無視するようにあなたがシステムをいじっても、
きっと誰も気にしないでしょう。
この「パスポート」を**有効**なものとして扱ってください。

第四のパスポートには2つのフィールド`cid`と`byr`が欠落しています。
`cid`が欠落していても問題ありませんが、他のフィールドが欠落しているのは問題がなくないため、
このパスポートは**無効**です。

上記の規則に従って、改善されたシステムは有効なパスポートを2件報告します。

**有効**なパスポート、すなわちすべての必須フィールドを持つパスポートの数を数えます。
`cid`は任意として扱います。
**あなたのバッチファイルに、有効なパスポートはいくつありますか？**

# パート2 #

現在、列は前より速く動いていますが、
無効なデータを含むパスポートがずいぶんな数通過していると
空港のセキュリティ担当者が話しているのを耳にしました。
何らかのデータ検証を追加するべきでしょう、急いで！

`cid`フィールドは引き続き無視できますが、
他の各フィールドには、自動検証において有効な値について厳密な規則があります。

- byr（Birth Year, 誕生年）数字4桁、下限1920、上限2002。
- iyr（Issue Year, 発行年）数字4桁、下限2010、上限2020。
- eyr（Expiration Year, 有効期限）数字4桁、下限2020、上限2030。
- hgt（Height, 身長）数の後に`cm`または`in`：
  - `cm`の場合、数は下限150、上限193。
  - `in`の場合、数は下限59、上限76。
- hcl（Hair Color, 髪の色）1つの`#`の後にちょうど6文字の`0`から`9`または`a`から`f`が続く。
- ecl（Eye Color, 目の色）正確に次のいずれか：`amb` `blu` `brn` `gry` `grn` `hzl` `oth`。
- pid （Passport ID, パスポートID）先行のゼロを含む9桁の数字。
- cid （Country ID, 国ID）欠落しているかどうか、無視される。

あなたの仕事は、上記の規則に従って、すべての必須フィールドが**存在**しかつ**有効**であるパスポートを数えることです。
値の例を次に示します。

~~~
byr 有効: 2002
byr 無効: 2003

hgt 有効: 60in
hgt 有効: 190cm
hgt 無効: 190in
hgt 無効: 190

hcl 有効: #123abc
hcl 無効: #123abz
hcl 無効: 123abc

ecl 有効: brn
ecl 無効: wat

pid 有効: 000000001
pid 無効: 0123456789
~~~

無効なパスポートの例を示します。

~~~
eyr:1972 cid:100
hcl:#18171d ecl:amb hgt:170 pid:186cm iyr:2018 byr:1926

iyr:2019
hcl:#602927 eyr:1967 hgt:170cm
ecl:grn pid:012533040 byr:1946

hcl:dab227 iyr:2012
ecl:brn hgt:182cm pid:021572410 eyr:2020 byr:1992 cid:277

hgt:59cm ecl:zzz
eyr:2038 hcl:74454a iyr:2023
pid:3556412378 byr:2007
~~~

有効なパスポートの例を挙げます。

~~~
pid:087499704 hgt:74in ecl:grn iyr:2012 eyr:2030 byr:1980
hcl:#623a2f

eyr:2029 ecl:blu cid:129 byr:1989
iyr:2014 pid:896056539 hcl:#a97842 hgt:165cm

hcl:#888785
hgt:164cm byr:2001 iyr:2015 cid:88
pid:545766238 ecl:hzl
eyr:2022

iyr:2010 hgt:158cm hcl:#b6652a ecl:blu byr:1944 eyr:2021 pid:093154719
~~~

**有効**なパスポート、すなわちすべての必須フィールドを持ち**有効な値**を持つパスポートの数を数えます。
`cid`は引き続き任意として扱います。
**あなたのバッチファイルで、有効なパスポートはいくつありますか？**
