# 10日目：アダプタアレイ #

飛行機のデータ端子にパッチを当てて侵入したところ、大規模な熱帯低気圧の天気予報を見つけました。
しかし、それが休暇の計画に影響を与えるかどうかを判断する前に、あなたのコンピュータの電源が突然落ちました。

バッテリーが切れています。
(dead ダメになっている？)

プラグを差し込む必要があります。問題が1つだけあります。
座席の近くにある充電コンセントの電圧が違います。
（訳注：voltをjoltにして遊んでいるのはスルーする）
こんなこともあろうかと、かばんに入れておいたすべての電源アダプタのリストがあります。

個々の電源アダプタは、特定の定格**出力電圧**が決まっています（パズル入力）。
アダプタはその定格出力電圧よりも1,2,3ボルト**低い**電圧を入力としてとることができ、
そのとき定格出力電圧を発生させます。

さらに、あなたのコンピュータには、
手持ちの最高定格のアダプタよりも**3ボルト高い**定格の電源アダプタが組み込まれています。
（アダプタのリストが3,9,6である場合、コンピュータに内蔵されているアダプタは、定格12ボルトになります。）

座席近くの充電コンセントの実効電圧定格を0ボルトとします。

時間の余裕があるので、すべてのアダプタをテストしたほうがよいでしょう。
リゾートに着いてから、コンピュータを充電することすらできないことに気づきたくありません！

手持ちの**すべてのアダプタを一度に**使用する場合、
充電コンセント、アダプタ、コンピュータ間の電圧の差の分布はどのようになりますか？

たとえば、かばんの中に、次の定格電圧のアダプタがあるとします。

~~~
16
10
15
5
1
11
7
19
6
12
4
~~~

これらのアダプタがあるとき、
コンピュータに組み込まれている電源アダプタの定格は19 + 3 = 22ボルトと、
最高定格のアダプタより3高くなります。

アダプタは、その定格電圧より1〜3ボルト低い電源にしか接続できないため、
すべてのアダプタを使用するには、次のように選択する必要があります。

- 充電コンセントの実効電圧定格は0ボルトです。
それに接続することができるアダプタは定格電圧1,2,3ボルトのものだけです。
これらのうちあなたが持っているのは定格電圧1ボルトのアダプタのみです。
（ここでの電位差は1ボルトになります。）
- 1ボルト定格のアダプタから続ける唯一の選択肢は、4ボルト定格のアダプタです。
（ここでの電位差は3ボルトになります。）
- 4ボルト定格アダプタからは、定格5,6,7ボルトのアダプタが有効な選択肢です。
ただし、アダプタを抜かさないようにするには、
5ボルト定格の5アダプタを選択する必要があります。
（ここでの電位差1ボルト）
- 同様に、次の選択は定格6ボルトのアダプタ、そして定格7ボルトのアダプタである必要があります。
（ここでの電位差1ボルトと1ボルト）
- 7ボルト定格のアダプタに接続できる唯一のアダプタは、定格10ボルトのものです。
（ここでの電位差3ボルト）
- 10から続ける選択肢は11と12です。
まず11を選び（ここでの電位差1ボルト）次に12にします（ここでの電位差1ボルト）。
- 12の続きで唯一の有効なアダプタは定格15ボルト（電位差3ボルト）、
そして16ボルト（電位差1ボルト）、そして19（電位差3ボルト）です。
- 最後に、コンピュータの組み込みアダプタは常に最高のアダプタより3高いため、
その定格は22ボルトです。（電位差は必ず3ボルト）

この例では、すべてのアダプタを使用する場合、
電位差1ボルトが7箇所、電位差3ボルトが5箇所現れます。

より大きな例を示します：

~~~
28
33
18
42
31
14
46
20
48
47
24
23
49
45
19
38
39
11
1
32
25
35
8
17
7
9
4
2
34
10
3
~~~

この大きな例では、すべてのアダプタを使用する数珠繋ぎでは、
22箇所が電位差1ボルト、10箇所が電位差3ボルトとなります。

すべてのアダプタを使用して充電コンセントからコンピュータの内蔵アダプタに接続する数珠繋ぎを見つけ、
充電コンセント、アダプタ、コンピュータ間の電位差ごとの回数を数えます。
**電位差1ボルトの個数に電位差3ボルトの個数を乗じた値はいくつですか？**

# パート2 #

十分なアダプタがあるかどうかを完全に判断するには、
アダプタを配置できるさまざまな方法がいくつあるかを把握する必要があります。
どの配置も、充電コンセントからコンピュータまで接続する必要があります。
アダプタが正常に接続できる以前の規則は引き続き適用されます。

最初の例（16, 10, 15で始まるもの）は以下の配置に対応しています。

~~~
(0), 1, 4, 5, 6, 7, 10, 11, 12, 15, 16, 19, (22)
(0), 1, 4, 5, 6, 7, 10, 12, 15, 16, 19, (22)
(0), 1, 4, 5, 7, 10, 11, 12, 15, 16, 19, (22)
(0), 1, 4, 5, 7, 10, 12, 15, 16, 19, (22)
(0), 1, 4, 6, 7, 10, 11, 12, 15, 16, 19, (22)
(0), 1, 4, 6, 7, 10, 12, 15, 16, 19, (22)
(0), 1, 4, 7, 10, 11, 12, 15, 16, 19, (22)
(0), 1, 4, 7, 10, 12, 15, 16, 19, (22)
~~~

（充電コンセントとコンピュータの内蔵アダプタは括弧で示しています。）
最初の例のアダプタを考えると、充電コンセントからコンピュータに接続する配置の総数は8です。

上のふたつめの例（28, 33, 18で始まるもの）は多くの配置ができます。
いくつかをここに示します：

~~~
(0), 1, 2, 3, 4, 7, 8, 9, 10, 11, 14, 17, 18, 19, 20, 23, 24, 25, 28, 31,
32, 33, 34, 35, 38, 39, 42, 45, 46, 47, 48, 49, (52)

(0), 1, 2, 3, 4, 7, 8, 9, 10, 11, 14, 17, 18, 19, 20, 23, 24, 25, 28, 31,
32, 33, 34, 35, 38, 39, 42, 45, 46, 47, 49, (52)

(0), 1, 2, 3, 4, 7, 8, 9, 10, 11, 14, 17, 18, 19, 20, 23, 24, 25, 28, 31,
32, 33, 34, 35, 38, 39, 42, 45, 46, 48, 49, (52)

(0), 1, 2, 3, 4, 7, 8, 9, 10, 11, 14, 17, 18, 19, 20, 23, 24, 25, 28, 31,
32, 33, 34, 35, 38, 39, 42, 45, 46, 49, (52)

(0), 1, 2, 3, 4, 7, 8, 9, 10, 11, 14, 17, 18, 19, 20, 23, 24, 25, 28, 31,
32, 33, 34, 35, 38, 39, 42, 45, 47, 48, 49, (52)

(0), 3, 4, 7, 10, 11, 14, 17, 20, 23, 25, 28, 31, 34, 35, 38, 39, 42, 45,
46, 48, 49, (52)

(0), 3, 4, 7, 10, 11, 14, 17, 20, 23, 25, 28, 31, 34, 35, 38, 39, 42, 45,
46, 49, (52)

(0), 3, 4, 7, 10, 11, 14, 17, 20, 23, 25, 28, 31, 34, 35, 38, 39, 42, 45,
47, 48, 49, (52)

(0), 3, 4, 7, 10, 11, 14, 17, 20, 23, 25, 28, 31, 34, 35, 38, 39, 42, 45,
47, 49, (52)

(0), 3, 4, 7, 10, 11, 14, 17, 20, 23, 25, 28, 31, 34, 35, 38, 39, 42, 45,
48, 49, (52)
~~~

合計では、このアダプタのセットは、19208の異なる配置で充電コンセントからコンピュータまで接続できます。

あなたはかばんの中を振り返り、なぜこれほど多くのアダプタを持ってきたのかを思い出そうとします。
それらを配置する有効な方法は**1兆以上**あるに違いありません！
どう考えても、配置を数える効率的な方法が必要です。

**充電コンセントからコンピュータへ接続するためにアダプタを配置できる個別の方法の総数はいくつですか？**
