# 12日目：地下の持続可能性 #

518年は、あなたの歴史書が示唆しているよりもはるかに地下にあります。
それはともあれ、
またはあなたは北極の下の広大な洞窟ネットワークに到着しました。

少し探索した後、長いトンネルに左右に見える限り植木鉢が続いて
列をなしているのをあなたは発見しました。
それらのいくつかには植物が生えています。
誰かが地熱で暖められた洞窟で育てようとしているようです。

植木鉢には番号が付けられています。
あなたの目の前に0番があります。
左側には-1, -2, -3…、右側には1, 2, 3…と続いています。
あなたのパズル入力には
0番から右の鉢のリストと、
現在の**初期状態**でそれに植物が植わっている(`#`)かいない(`.`)
かが含まれています。
（他の鉢には今は植物は生えていません。）
例えば、初期状態 `#..##....` は
0, 3, 4 番の鉢に現在は植物が生えていることを意味します。

あなたのパズル入力には、
近くの机にあったいくつかのメモも含まれています。

誰かが
これらの植物が近くの鉢にどのように**広がっていくか**把握し
ようとしているようです。
このノートに基づいて、
各世代について、
ある鉢に植物が生えるかどうかは、
その鉢およびその両側2つずつの鉢に
直前の世代に植物が生えていたかどうかに基づいて決まる。
これらは `LLCRR => N` の形式で書かれる。
ここで`L`は左の鉢、`C`は今注目している鉢、`R`は右の鉢を意味する。
`N`は今注目している鉢に次の世代で植物が生えるかどうかである。
例えば：

- `..#.. => .` というノートは、
植物が生えているが2つ隣までに全く生えていない鉢は、
次の世代に植物が生えないことを意味する。
- `##.## => .` というノートは、
植物が生えて折らずその2つ両隣全てに生えている鉢は、
次の世代に植物が生えないことを意味する。
- `.##.# => #` というノートは、
その鉢に植物があり、
すぐに左に1つ、右に1つおいた鉢にも生えているとき、
次の世代に植物が生えることを意味する。

これらの植物が何であるかははっきりしていませんが、
それが重要であると確信しているので、
**20世代後**に何が起こるかを判断することによって、
植物の現在の構成が持続可能であることを確認したいと考えています。

たとえば、次の入力があるとします。

~~~
initial state: #..#.#..##......###...###

...## => #
..#.. => #
.#... => #
.#.#. => #
.#.## => #
.##.. => #
.#### => #
#.#.# => #
#.### => #
##.#. => #
##.## => #
###.. => #
###.# => #
####. => #
~~~

簡潔にするために、この例では、植物の生える組み合わせのみを列挙している。
（入力にはすべての組み合わせが含まれています。）
次の20世代は以下のようになります。

~~~
                 1         2         3
       0         0         0         0
 0: ...#..#.#..##......###...###...........
 1: ...#...#....#.....#..#..#..#...........
 2: ...##..##...##....#..#..#..##..........
 3: ..#.#...#..#.#....#..#..#...#..........
 4: ...#.#..#...#.#...#..#..##..##.........
 5: ....#...##...#.#..#..#...#...#.........
 6: ....##.#.#....#...#..##..##..##........
 7: ...#..###.#...##..#...#...#...#........
 8: ...#....##.#.#.#..##..##..##..##.......
 9: ...##..#..#####....#...#...#...#.......
10: ..#.#..#...#.##....##..##..##..##......
11: ...#...##...#.#...#.#...#...#...#......
12: ...##.#.#....#.#...#.#..##..##..##.....
13: ..#..###.#....#.#...#....#...#...#.....
14: ..#....##.#....#.#..##...##..##..##....
15: ..##..#..#.#....#....#..#.#...#...#....
16: .#.#..#...#.#...##...#...#.#..##..##...
17: ..#...##...#.#.#.#...##...#....#...#...
18: ..##.#.#....#####.#.#.#...##...##..##..
19: .#..###.#..#.#.#######.#.#.#..#.#...#..
20: .#....##....#####...#######....#.#..##.
~~~

世代は左辺に沿って示され、0とあるのが初期状態です。
鉢の番号は上辺に沿って示され、0は中央の鉢、
負の番号の鉢が左側に伸び、
正の番号の鉢が右側に伸びて表示されます。
初期状態は0番の鉢から始まりますが、
この例における最も左の鉢はそれではないことに気をつけてください。

1世代後には7つの植物しか残っていない。
0番の鉢にあるそのひとつは `..#..` を探す規則に適合した。
4番の鉢に生えたものは、`.#.#.` を探す規則に適合した。
9番の鉢のものは `.##..` 、などとなっている。

この例では、
20世代後には、`#` で示される植物を含む鉢は-2番が最左で、最右のものは34番である。
第20世代の植物を含む鉢の番号をすべて足し合わせると**325**となる。

**20世代の後、植物を含むすべての鉢の番号の合計はいくらですか？**

# パート2 #

あなたは20世代で充分ではないことに気付きます。
結局のところ、あなたの未来は言うまでもなく、(?)
これらの植物は
あなたの時代に到達するためにさらに1500年も持続する必要があります。

**50億(50000000000)世代後、
植物の生えているすべての鉢の番号の合計はいくつですか？**
