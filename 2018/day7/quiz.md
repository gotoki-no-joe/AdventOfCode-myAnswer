# 7日目：その部分の合計 #

あなたは雪で覆われた海岸線に立っています。
明らかに、コースからちょっと離れて着陸しました。
この地域はここから北極を見るにはあまりにも丘陵ですが、
岸にうち上げられた何かを開梱しようとしているらしい妖精たちを見つけた。
ここはかなり寒いので、
パラドックスを作り出す危険を冒して
方向を尋ねることにします。

「ああ、あなたは捜索隊ですか？」
どういうわけか、
あなたは1018年の妖精が話す言葉を理解することができます。
あなたは彼らが**古代北欧の妖精**だろうと憶測した。
手首のデバイスは翻訳機でもあるのだろうか？
「あなたの服は寒そうです。これを着なさい。」
彼らはあなたに重いコートを渡しました。

「私たちは北極に戻る道を見つける必要がありますが、
今はそれよりも優先順位の高いことがあります。
何しろ、信じられないかもしれませんが、
この箱の中にはサンタの輸送問題をすべて解決するような何かが入っています。
少なくとも、指示書にあった絵にそっくりです。」
妖精達は文字を全く読めないようでしたが、あなたは読めます。
「そりキット　組み立てが必要です」

「『そり』？素晴らしい名前だ！
今からこの『そり』を組み立てるのを手伝ってくれるよね！」
彼らは興奮して、より多くの部品を箱から引き出します。

手順書には、一連の**手順**と、
ある手順を開始する前にどの手順を完了する必要があるかの指定が
書かれている（パズル入力）。
各手順はアルファベット1文字で指定されています。
たとえば、次のような指示があるとします。

~~~
Step C must be finished before step A can begin.
Step C must be finished before step F can begin.
Step A must be finished before step B can begin.
Step A must be finished before step D can begin.
Step B must be finished before step E can begin.
Step D must be finished before step E can begin.
Step F must be finished before step E can begin.
~~~

視覚的には、これらの要件は次のようになります。

~~~
  -->A--->B--
 /    \      \
C      -->D----->E
 \           /
  ---->F-----
~~~

あなたのひとつめの目標は、手順を完了させる順序を決定することです。
複数の手順が準備できている場合は、
アルファベット順で最初の手順を選択します。
この例では、手順は次のように完了します。

- 唯一Cが可能なので、最初に行われます。
- 次に、AとFの両方が可能になります。
アルファベット順でAが先頭なので、それが次に実行されます。
- その後、Fが以前から可能だったにもかかわらず、
手順BとDも今や可能になりました。
その3つの中でアルファベット順に最初のものはBです。
- その後、DとFのみ可能です。
はE前提条件の一部のみが完了しているため、実行できません。
したがって、次はDを完了させます。
- Fが唯一の選択肢なので、次に実行されます。
- 最後に、Eを完了します。

したがって、この例では、正しい順序は`CABDFE`です。

**あなたの指示書の手順はどのような順序で完了しなければなりませんか？**

# パート2 #

あなたが組み立てを始めようとしたとき、
4人の妖精エルフが手伝いを申し出てくれました。
「太陽がじきに沈む。一緒にやれば早くできる。」
さて、
複数の人が同時にそれぞれ手順を行うことを考慮する必要があります。
複数の手順が可能な場合、
作業者はやはりアルファベット順に開始する必要があります。

各手順は60秒に加えてその文字に対応する量（A=1, B=2, C=3, …)
だけ時間がかかります。
つまり、手順Aは60+1=61秒かかり、手順Zは60+26=86秒かかります。
手順の間に時間はかかりません。

例では話を単純化するために、
手助けの妖精は1人だけ（全部で2人の作業者）、
各手順にかかる時間は60秒少ないもの
（手順Aは1秒かかり、手順Zは26秒かかる）とします。
上記と同じ指示書を使用して、1秒ごとが費やされるかを次に示します。

| 秒  | 作業者1 | 作業者2 | 完了   |
|----:|:-------:|:-------:|:-------|
|  0  |      C  |      .  |        |
|  1  |      C  |      .  |        |
|  2  |      C  |      .  |        |
|  3  |      A  |      F  | C      |
|  4  |      B  |      F  | CA     |
|  5  |      B  |      F  | CA     |
|  6  |      D  |      F  | CAB    |
|  7  |      D  |      F  | CAB    |
|  8  |      D  |      F  | CAB    |
|  9  |      D  |      .  | CABF   |
| 10  |      E  |      .  | CABFD  |
| 11  |      E  |      .  | CABFD  |
| 12  |      E  |      .  | CABFD  |
| 13  |      E  |      .  | CABFD  |
| 14  |      E  |      .  | CABFD  |
| 15  |      .  |      .  | CABFDE |

各行は1秒の時間を表します。
<!--
そんな列はない。
The Second column identifies how many seconds have passed as of the
beginning of that second.
2番目の列は、その秒の初めに何秒経過したかを示します。
-->
各作業者列には、
作業者が現在行っている手順（または何もしていない場合は`.`）を示します。
完了列には完了した手順が表示されます。

手順の順序が変化していることに注意してください。
これは、手順が完了するまでに時間がかかり、
複数の作業者が同時に複数の手順を開始できるためです。

この例では、2人の作業者がこれらの手順を完了するまでに**15**秒かかります。

**5人**の作業者と、
手順には上述したように**もう60秒**の時間がかかるとき、
**すべての手順を完了するのにかかる時間はどれだけですか？**
