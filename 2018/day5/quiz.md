# 第5日：錬金術的縮小 #

あなたは試作サンタ服製造ラボに潜入することに成功しました。
妖精たちはそれなりに進捗を上げていますが、
まだサンタ服のサイズ縮小能力の開発に苦労しています。

1518年の錬金術の最新技術でも最終的には彼らの問題を解決できるかもしれませんが、
あなたならより上手くやれます。
スーツの材料の化学成分をスキャンし、
非常に長い**ポリマー**（パズル入力の一部）によって形成されていることを発見しました。

ポリマーはより小さい**ユニット**群によって形成されています。
ユニットは励起されると
同じ種類でかつ逆の極性の隣接するユニットふたつが
破壊される反応を起こします。
ユニットの種類は文字で表されます。
ユニットの極性は大文字小文字で表されます。
例えば、`r`と`R`は同じ種類で極性が逆のユニットで、
一方`r`と`s`は種類が全く異なり反応しません。

例えば：

- `aA` では `a`と`A`が反応し、後に何も残りません。
- `abBA` では、`bB` が自分自身を破壊して `aA`を残します。
上記のように、これはそれ自体を破壊し、何も残りません。
- `abAB` では、隣接する2つのユニットは同じ種類ではないため、何も起こりません。
- `aabAAB` では、`aa`と`AA`は同じ種類のものですが、その極性も一致するので、
何も起こりません。

では、より大きな例 `dabAcCaCBAcCcaDA` を考えてみましょう。

```
dabAcCaCBAcCcaDA  ひとつめの cC が取り除かれます。
dabAaCBAcCcaDA    それにより Aa が出現し、取り除かれます。
dabCBAcCcaDA      cC または Cc が取り除かれます。（結果は同じ）
dabCBAcaDA        これ以上の動作は起きません。
```

すべての可能な反応の後、結果として得られるポリマーは**10ユニット**からなります。

**スキャンしたポリマーを完全に反応させた後、何個のユニットが残りますか？**
（注：このパズルと次では入力が大きいので、
入力をコピー&ペーストする場合は全体を取り込むことに気をつけて下さい。）

# パート2 #

ポリマーを改良する時間です。

ある種類のユニットが問題を引き起こしています。
ポリマーが崩壊するのを妨害しているため、目標値に到達していません。
あなたの目標は、
どのユニットの種類が最も問題を引き起こしているのかを把握し、
その種類のユニットを全て（極性に関係なく）除去し、
残りのポリマーを完全に反応させ、その長さを測定することです。

例として、上のポリマー `dabAcCaCBAcCcaDA` を再び使用します：

- すべての `A/a` ユニットを除去すると`dbcCCBcCcD` が生成されます。
このポリマーを完全に反応させると `dbCBcD` が生成され、その長さは6です。
- すべての `B/b` ユニットを除去すると `daAcCaCAcCcaDA` が生成されます。
このポリマーを完全に反応させると `daCAcaDA` が生成され、その長さは8です。
- すべての `C/c` ユニットを除去すると `dabAaBAaDA` が生成されます。
このポリマーを完全に反応させると　`daDA` が生成され、その長さは4です。
- すべての `D/d` ユニットを除去すると `abAcCaCBAcCcaA` が生成されます。
このポリマーを完全に反応させると　`abCBAc` が生成され、その長さは6です。

この例では、すべての `C/c` ユニットを除去するのが最善で、
答えは4となります。

1つの種類のユニットだけをすべてを取り除き、
結果を完全に反応させることで得られる、
**最短のポリマーの長さはどれだけですか？**
